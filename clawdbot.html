<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clawdbot - Intelligence Cubed</title>
    <link rel="icon" type="image/svg+xml" href="/svg/i3-token-logo.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="/png/i3-token-logo.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/png/i3-token-logo.png">
    <link rel="preload" as="image" href="/svg/chains/ethereum.svg">
    <link rel="preload" as="image" href="/svg/chains/bnb.svg">
    <link rel="preload" as="image" href="/svg/chains/polygon-zkevm.svg">
    <link rel="preload" as="image" href="/svg/chains/arbitrum.svg">
    <link rel="preload" as="image" href="/svg/chains/optimism.svg">
    <link rel="preload" as="image" href="/svg/chains/solana.svg">
    <link rel="preload" as="image" href="/svg/chains/base.svg">
    <link rel="preload" as="image" href="/svg/chains/zksync.svg">
    <link rel="preload" as="image" href="/svg/chains/opbnb.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="account-dropdown.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
    <script type="module" src="binance-sdk.js?v=4"></script>
    <script src="https://unpkg.com/@base-org/account/dist/base-account.min.js"></script>
    <script>
        window.cdpConnect = async function() {
            if (!window.createBaseAccountSDK) {
                throw new Error('Base Account SDK not loaded');
            }
            const provider = window.createBaseAccountSDK({
                appName: 'Intelligence Cubed',
                appLogoUrl: 'https://i3-testnet.web.app/png/i3-token-logo.png'
            }).getProvider();
            const accounts = await provider.request({ method: 'eth_requestAccounts' });
            if (accounts && accounts.length > 0) return { address: accounts[0] };
            throw new Error('No accounts returned');
        };
    </script>
    <style>
        body {
            background: radial-gradient(120% 120% at 10% 10%, #ffffff 0%, #f6f7fb 45%, #eef2f7 100%);
            font-family: 'Inter', sans-serif;
        }

        .clawdbot-page {
            max-width: 1100px;
            margin: 0 auto;
            padding: 64px 20px 96px;
        }

        .clawdbot-card {
            background: #ffffff;
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(15, 23, 42, 0.08);
            border: 1px solid rgba(148, 163, 184, 0.2);
        }

        .clawdbot-title {
            font-size: 32px;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 12px;
        }

        .clawdbot-subtitle {
            color: #475569;
            line-height: 1.7;
            font-size: 15px;
            margin-bottom: 28px;
        }

        .clawdbot-form {
            display: grid;
            gap: 16px;
        }

        .clawdbot-label {
            font-size: 13px;
            font-weight: 600;
            color: #334155;
        }

        .clawdbot-input {
            padding: 12px 14px;
            border-radius: 10px;
            border: 1px solid #d8dee9;
            font-size: 14px;
            color: #0f172a;
        }

        .clawdbot-input:focus {
            outline: none;
            border-color: #7c3aed;
            box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.15);
        }

        .clawdbot-actions {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .clawdbot-button {
            padding: 12px 18px;
            background: linear-gradient(135deg, #7c3aed, #8b5cf6);
            color: #ffffff;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .clawdbot-button:disabled {
            cursor: not-allowed;
            opacity: 0.6;
            transform: none;
            box-shadow: none;
        }

        .clawdbot-button:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.2);
        }

        .clawdbot-status {
            font-size: 13px;
            color: #475569;
        }

        .clawdbot-status.success {
            color: #059669;
        }

        .clawdbot-status.error {
            color: #dc2626;
        }

        .login-hint {
            background: #f8fafc;
            border: 1px dashed #cbd5f5;
            color: #475569;
            padding: 16px;
            border-radius: 12px;
            font-size: 14px;
        }

        .hidden {
            display: none;
        }

        .wallet-modal {
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            position: fixed !important;
            inset: 0 !important;
            z-index: 10000;
            background: rgba(0,0,0,.4);
            opacity: 0;
            transition: opacity .25s ease;
            pointer-events: none;
        }

        .wallet-modal.show {
            opacity: 1;
            pointer-events: auto;
        }

        .wallet-modal-content {
            position: relative;
            background: #fff;
            border-radius: 24px;
            padding: 36px;
            max-width: 440px;
            width: 92%;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 12px 40px rgba(0,0,0,.12);
            transform: scale(.95);
            opacity: 0;
            transition: transform .25s ease, opacity .25s ease;
        }

        .wallet-modal.show .wallet-modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .wallet-modal-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .wallet-modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .wallet-modal-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 400;
            line-height: 1.5;
        }

        .wallet-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #6b7280;
        }

        .wallet-options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .wallet-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 14px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
            background: #fff;
            transition: background .2s ease, border-color .2s ease, transform .2s ease;
        }

        .wallet-option:hover {
            border-color: #d1d5db;
            background: #f9fafb;
            transform: translateY(-1px);
        }

        .wallet-icon-wrap {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .wallet-icon-wrap img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        .wallet-name {
            font-size: 14px;
            font-weight: 500;
            color: #111827;
        }

        .wallet-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #6b7280;
            font-weight: 400;
        }

        @media (max-width: 768px) {
            .clawdbot-card {
                padding: 28px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="logo" onclick="window.location.href='index.html'" style="cursor: pointer;">
                    <img src="svg/I3 logo.svg" alt="Intelligence Cubed" class="logo-image" style="height: 40px; width: auto;">
                </div>
                <nav class="nav-menu">
                    <button class="nav-item" onclick="window.location.href='index.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Chats
                    </button>
                    <button class="nav-item" onclick="window.location.href='modelverse.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="m2 17 10 5 10-5" stroke="currentColor" stroke-width="2"/>
                            <path d="m2 12 10 5 10-5" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Modelverse
                    </button>
                    <button class="nav-item" onclick="window.location.href='benchmark.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Benchmark
                    </button>
                    <button class="nav-item" onclick="window.location.href='canvas.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M9 9h6v6H9z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Canvas
                    </button>
                    <button class="nav-item" onclick="window.location.href='workflow.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Workflows
                    </button>
                    <button class="nav-item active" onclick="window.location.href='clawdbot.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M5 7h14v10H5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M8 7V5h8v2" stroke="currentColor" stroke-width="2"/>
                            <path d="M9 17h6" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Clawdbot
                    </button>
                    <button class="nav-item" onclick="window.location.href='personal-agent.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M12 12l-10 5 10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Personal Agent
                    </button>
                    <button class="nav-item" onclick="window.location.href='mycart.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M7 4V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M5 4h14l-1 14H6L5 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        My Cart
                    </button>
                </nav>

                <div class="mobile-nav-overlay" onclick="closeMobileMenu()"></div>
                <div class="mobile-nav-menu">
                    <button class="nav-item" onclick="window.location.href='index.html'">Chats</button>
                    <button class="nav-item" onclick="window.location.href='modelverse.html'">Modelverse</button>
                    <button class="nav-item" onclick="window.location.href='benchmark.html'">Benchmark</button>
                    <button class="nav-item" onclick="window.location.href='canvas.html'">Canvas</button>
                    <button class="nav-item" onclick="window.location.href='workflow.html'">Workflows</button>
                    <button class="nav-item active" onclick="window.location.href='clawdbot.html'">Clawdbot</button>
                    <button class="nav-item" onclick="window.location.href='personal-agent.html'">Personal Agent</button>
                    <button class="nav-item" onclick="window.location.href='mycart.html'">MyCart</button>
                </div>
            </div>

            <div class="header-right">
                <button id="networkBadge" class="network-badge" type="button" style="display:none" onclick="openNetworkPickerModal()">
                    <img class="network-badge__icon" src="" alt="">
                    <span class="network-badge__text">Network</span>
                    <svg class="network-badge__caret" width="12" height="12" viewBox="0 0 24 24">
                        <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/>
                    </svg>
                </button>
                <div class="user-section">
                    <div id="accountDropdownMount"></div>
                </div>
            </div>
        </div>
    </header>

    <main class="clawdbot-page">
        <section class="clawdbot-card">
            <h1 class="clawdbot-title">Clawdbot Instance Launch</h1>
            <p class="clawdbot-subtitle">
                Spin up a dedicated Clawdbot deployment with a custom name. This requires Google sign-in and will trigger
                the Cloud Build pipeline using your Firebase identity.
            </p>

            <div id="loginPrompt" class="login-hint">
                Sign in with Google to create a deployment.
            </div>

            <div id="createSection" class="clawdbot-form hidden">
                <label class="clawdbot-label" for="deploymentName">Custom name</label>
                <input id="deploymentName" class="clawdbot-input" placeholder="e.g. clawdbot-alpha" maxlength="40">
                <div class="clawdbot-actions">
                    <button id="createDeploymentBtn" class="clawdbot-button">Create deployment</button>
                    <div id="createStatus" class="clawdbot-status"></div>
                </div>
            </div>
        </section>
    </main>

    <div id="walletModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <button class="wallet-close-btn" onclick="closeWalletModal()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <div class="wallet-modal-header">
                <h2 class="wallet-modal-title">Log in or sign up</h2>
                <p class="wallet-modal-subtitle">Log in and connect wallet to earn I3 tokens</p>
            </div>
            <div class="wallet-options">
                <div class="wallet-option available" onclick="connectMetaMaskWallet()">
                    <span class="wallet-icon-wrap"><img src="svg/metamask.svg" alt="MetaMask"></span>
                    <div class="wallet-info"><div class="wallet-name">MetaMask</div></div>
                </div>
                <div class="wallet-option available" onclick="connectWalletConnect()">
                    <span class="wallet-icon-wrap"><img src="svg/walletconnect.svg" alt="WalletConnect"></span>
                    <div class="wallet-info"><div class="wallet-name">WalletConnect</div></div>
                </div>
                <div class="wallet-option available" onclick="connectCoinbaseWallet()">
                    <span class="wallet-icon-wrap"><img src="svg/coinbase.svg" alt="Coinbase"></span>
                    <div class="wallet-info"><div class="wallet-name">Coinbase Wallet</div></div>
                </div>
                <div class="wallet-option available" onclick="connectBinanceWallet()">
                    <span class="wallet-icon-wrap"><img src="png/binance_wallet.jpeg" alt="Binance Wallet"></span>
                    <div class="wallet-info"><div class="wallet-name">Binance Wallet</div></div>
                </div>
                <div class="wallet-option available" onclick="connectSolanaPhantom()">
                    <span class="wallet-icon-wrap"><img src="svg/phantom.svg" alt="Phantom"></span>
                    <div class="wallet-info"><div class="wallet-name">Phantom (Solana)</div></div>
                </div>
                <div class="wallet-footer">By Intelligence Cubed</div>
            </div>
        </div>
    </div>

    <div id="onChainCheckInModal" class="wallet-modal" style="display: none;">
        <div class="wallet-modal-content" style="max-width: 520px;">
            <button class="wallet-close-btn" onclick="closeOnChainCheckInModal()">✕</button>
            <div class="wallet-modal-header">
                <h2 class="wallet-modal-title">✅ Check-In on Chain</h2>
                <p class="wallet-modal-subtitle">Complete your daily on-chain check-in to earn I3 credits</p>
            </div>
            <div id="userStatusSection" style="margin: 20px 0; padding: 16px; background: #f0fdf4; border-radius: 12px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <div>
                        <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Current Streak</p>
                        <p id="currentStreak" style="font-size: 24px; font-weight: 700; color: #10b981; margin: 0;">0 days</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Total Check-ins</p>
                        <p id="totalCheckIns" style="font-size: 24px; font-weight: 700; color: #10b981; margin: 0;">0</p>
                    </div>
                </div>
                <div style="padding-top: 12px; border-top: 1px solid #d1fae5;">
                    <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Estimated Reward</p>
                    <p id="nextReward" style="font-size: 20px; font-weight: 700; color: #10b981; margin: 0;">30 credits</p>
                </div>
            </div>
            <div style="margin: 20px 0;">
                <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">Select Network</label>
                <select id="chainSelector" style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px;">
                    <option value="BSC">BNB Smart Chain (BSC)</option>
                    <option value="OPBNB">opBNB Mainnet</option>
                    <option value="ETH">Ethereum Mainnet</option>
                    <option value="BASE">Base Mainnet</option>
                    <option value="SOLANA_DEVNET">Solana Devnet</option>
                    <option value="SOLANA_MAINNET">Solana Mainnet</option>
                </select>
            </div>
            <button id="checkinButton" class="clawdbot-button" style="width: 100%;">Check in now</button>
            <div id="checkinStatus" class="clawdbot-status" style="margin-top: 12px;"></div>
        </div>
    </div>

    <script src="model-data.js"></script>
    <script src="account-dropdown.js"></script>
    <script type="module" src="chains.js"></script>
    <script type="module" src="solana-wallet.js"></script>
    <script type="module" src="solana-checkin.js"></script>
    <script src="contract-config.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="wallet-manager.js"></script>
    <script src="credit-api-wrapper.js"></script>
    <script src="unified-spend-credits.js"></script>
    <script src="wallet-integration.js"></script>
    <script src="onchain-checkin.js"></script>
    <script src="clawdbot.js"></script>
    <script>
        function toggleMobileMenu() {
            const menu = document.querySelector('.mobile-nav-menu');
            const overlay = document.querySelector('.mobile-nav-overlay');
            menu.classList.toggle('active');
            overlay.classList.toggle('active');
        }

        function closeMobileMenu() {
            const menu = document.querySelector('.mobile-nav-menu');
            const overlay = document.querySelector('.mobile-nav-overlay');
            menu.classList.remove('active');
            overlay.classList.remove('active');
        }

        document.addEventListener('DOMContentLoaded', function() {
            try { injectAccountDropdown('#accountDropdownMount'); } catch (e) { console.warn('injectAccountDropdown failed:', e); }
        });
    </script>
</body>
</html>
