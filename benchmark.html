<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmark - Intelligence Cubed</title>
    <link rel="icon" type="image/svg+xml" href="/svg/i3-token-logo.svg">
    <link rel="icon" type="image/png" sizes="192x192" href="/png/i3-token-logo.png">  <!-- ÂèØÈÄâ: ÂáÜÂ§á‰∏ÄÂº† 192x192 PNG -->
    <link rel="apple-touch-icon" sizes="192x192" href="/png/i3-token-logo.png"> 
    <link rel="preload" as="image" href="/svg/chains/ethereum.svg">
    <link rel="preload" as="image" href="/svg/chains/bnb.svg">
    <link rel="preload" as="image" href="/svg/chains/polygon-zkevm.svg">
    <link rel="preload" as="image" href="/svg/chains/arbitrum.svg">
    <link rel="preload" as="image" href="/svg/chains/optimism.svg">
    <link rel="preload" as="image" href="/svg/chains/solana.svg">
    <link rel="preload" as="image" href="/svg/chains/base.svg">
    <link rel="preload" as="image" href="/svg/chains/zksync.svg">
    <link rel="preload" as="image" href="/svg/chains/opbnb.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="modelverse.css">
    <link rel="stylesheet" href="benchmark.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://c0f4f41c-2f55-4863-921b-sdk-docs.github.io/cdn/metamask-sdk.js"></script>
    
    <!-- Binance Web3 Wallet SDK Provider (for QR code connection) -->
    <!-- Using npm bundle with proper crypto polyfills -->
    <script type="module" src="binance-sdk.js?v=4"></script>
    
    <!-- Base Account SDK -->
    <script src="https://unpkg.com/@base-org/account/dist/base-account.min.js"></script>
    
    <script>
        // ÁÆÄÂçïÁöÑÂàùÂßãÂåñ
        window.cdpConnect = async function() {
            if (!window.createBaseAccountSDK) {
                throw new Error('Base Account SDK not loaded');
            }
            
            const provider = window.createBaseAccountSDK({
                appName: 'Intelligence Cubed',
                appLogoUrl: 'https://intelligencecubed.netlify.app/png/i3-token-logo.png'
            }).getProvider();
            
            // Áõ¥Êé•ËØ∑Ê±ÇË¥¶Êà∑ËøûÊé•ÔºåË∑≥ËøáÂ§çÊùÇÁöÑË∫´‰ªΩÈ™åËØÅÊµÅÁ®ã
            const accounts = await provider.request({
                method: 'eth_requestAccounts'
            });
            
            if (accounts && accounts.length > 0) {
                return { address: accounts[0] };
            }
            
            throw new Error('No accounts returned');
        };

    </script>

    <!-- ‰ªÖÂú®ÊóßÊµèËßàÂô®ÈúÄË¶ÅÔºõÁé∞‰ª£ÊµèËßàÂô®‰πüÂèØ‰ª•‰øùÁïôÔºå‰∏ç‰ºöÊúâÂâØ‰ΩúÁî® -->
    <script async src="https://ga.jspm.io/npm:es-module-shims@1.10.0/dist/es-module-shims.js"></script>

    <script type="module-shim">
	  // ========= AppKit loader with CDN fallback (fixed 1.8.4) =========
	  const PROJECT_ID = '87a5da024dea0385e2d43dcad60b4935';
	  async function load(kind) {
	    if (kind === 'unpkg') {
	      const { createAppKit } = await import('https://unpkg.com/@reown/appkit@1.8.4/dist/index.js?module');
	      const nets = await import('https://unpkg.com/@reown/appkit@1.8.4/networks/index.js?module');
	      return { createAppKit, nets };
	    }
	    if (kind === 'jsdelivr') {
	      const { createAppKit } = await import('https://cdn.jsdelivr.net/npm/@reown/appkit@1.8.4/+esm');
	      const nets = await import('https://cdn.jsdelivr.net/npm/@reown/appkit@1.8.4/networks/+esm');
	      return { createAppKit, nets };
	    }
	    // esm.sh ‰Ωú‰∏∫Á¨¨‰∏âÂ§áÈÄâ
	    const { createAppKit } = await import('https://esm.sh/@reown/appkit@1.8.4');
	    const nets = await import('https://esm.sh/@reown/appkit@1.8.4/networks');
	    return { createAppKit, nets };
	  }
	  let mod;
	  try { mod = await load('unpkg'); }
	  catch { try { mod = await load('jsdelivr'); } catch { mod = await load('esmsh'); } }
	  const { createAppKit, nets } = mod;
	  // ‚ë† ËØªÂèñ"È¶ñÈÄâÁΩëÁªú"Ôºà‰Ω†Ê®°ÂùóÈáå setPreferredNetwork ÂÜôÂÖ•ÁöÑÔºâ
	  const pref = (window.getPreferredNetwork && window.getPreferredNetwork()) || { key: 'ethereum', kind: 'evm' };
	  // ‚ë° I3 ‚Üí AppKit ÁΩëÁªúÊò†Â∞ÑÔºàÊåâ‰Ω†ÂΩìÂâç 1.8.4 ÂèØÁî®ÁöÑ nets Â≠óÊÆµÊù•ÂØπÈΩêÔºâ
	  const map = {
	    ethereum:  nets.mainnet,
	    sepolia:   nets.sepolia,     // ÊµãËØïÈìæÂèØÈÄâ
	    polygon:   nets.polygon,
	    bnb:       nets.bsc,
	    arbitrum:  nets.arbitrum,
	    optimism:  nets.optimism,
	    avalanche: nets.avalanche,
	    fantom:    nets.fantom,
	    gnosis:    nets.gnosis,
	    linea:     nets.linea,
	    scroll:    nets.scroll,
	    zksync:    nets.zksync
	    // Â¶ÇÈúÄ base / polygonZkEvmÔºåËØ∑Á°ÆËÆ§ 1.8.4 ÊòØÂê¶Êö¥Èú≤Áõ∏Â∫îÈîÆÂêéÂÜçË°•Ôºö
	    // base: nets.base,
	    // 'polygon-zkevm': nets.polygonZkEvm,
	  };
	  // ‚ë¢ ÂÖÅËÆ∏Âú® AppKit ÂºπÁ™óÈáåÂ±ïÁ§∫ÁöÑÈìæÔºà‰Ω†Áé∞Âú® index ÂéüÊú¨ÂàóÁöÑÊàëÈÉΩ‰øùÁïô‰∫ÜÔºâ
	  const allowKeys = [
	    'ethereum','sepolia','polygon','bnb','arbitrum','optimism',
	    'avalanche','fantom','gnosis','linea','scroll','zksync'
	  ];
	  // Â¶ÇÊûúÁî®Êà∑Âú®Ê®°ÂùóÈáåÈÄâ‰∫Ü SolanaÔºàkind === 'solana'ÔºâÔºåAppKit ‰æùÁÑ∂Âè™ÁÆ° EVMÔºå
	  // ËøôÈáåÂ∞±ÊääÈªòËÆ§ÈìæÂõûÈÄÄÂà∞ ethereumÔºåÈÅøÂÖçÊó†ÊïàÈ¶ñÈÄâ
	  const effectivePrefKey = (pref.kind === 'evm' && map[pref.key]) ? pref.key : 'ethereum';
	  // ‚ë£ ËÆ°ÁÆóÈªòËÆ§Èìæ & ÂàóË°®ÔºàÊääÈªòËÆ§ÈìæÁΩÆÈ°∂ÔºåÂÖ∂‰ªñÊåâ allowKeys È°∫Â∫èÂéªÈáçËøΩÂä†Ôºâ
	  const defaultNet = map[effectivePrefKey] || nets.mainnet;
	  const allowedList = allowKeys.map(k => map[k]).filter(Boolean);
	  const networks = [defaultNet, ...allowedList.filter(n => n !== defaultNet)];
	  // ‚ë§ ÂàõÂª∫ AppKit ‚Äî‚Äî 1.8.4 ÊúâÁöÑÁâàÊú¨ÊîØÊåÅ defaultNetworkÔºåÊ≤°Êúâ‰πü‰∏çÊä•Èîô
	  const modal = createAppKit({
	    projectId: PROJECT_ID,
	    networks,
	    // Êüê‰∫õÁâàÊú¨ÊîØÊåÅÔºõËã•ÊéßÂà∂Âè∞ÊèêÁ§∫‰∏çËØÜÂà´ÂèØ‰ª•ÂøΩÁï•ËøôË°å
	    defaultNetwork: defaultNet,
	    metadata: {
	      name: 'Intelligence Cubed',
	      description: 'AI Terminal for Web3',
	      url: 'https://intelligencecubed.netlify.app',
	      icons: ['https://intelligencecubed.netlify.app/png/i3-token-logo.png']
	    }
	  });
	  // Êö¥Èú≤Áªô‰∏öÂä°‰ª£Á†Å
	  window.appkit = modal;
	  // ÂÖºÂÆπ‰Ω†Áé∞Êúâ initializeWalletConnect ÁöÑÁ≠âÂæÖÈÄªËæë
	  window.dispatchEvent(new Event('reownAppKitLoaded'));
	  console.log('[OK] AppKit loaded', { defaultNet, networks, modal });
	</script>

    <script type="module-shim">
	  import {
	    Connection,
	    clusterApiUrl,
	    PublicKey
	  } from 'https://esm.sh/@solana/web3.js@1.95.3';
	  window.SOL = { Connection, clusterApiUrl, PublicKey };
	</script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="account-dropdown.css">
    <style>
        /* Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°ÜÊ†∑Âºè */
		.wallet-modal {
		  display: flex !important;            /* ÂßãÁªà flex Â∏ÉÂ±Ä */
		  align-items: center !important;      /* ÂßãÁªàÂûÇÁõ¥Â±Ö‰∏≠ */
		  justify-content: center !important;  /* ÂßãÁªàÊ∞¥Âπ≥Â±Ö‰∏≠ */
		  position: fixed !important;
		  inset: 0 !important;
		  z-index: 10000;
		  background: rgba(0,0,0,.4);          /* ‚úÖ Ê≠£Á°ÆÂÜôÊ≥ï */
		  opacity: 0;
		  transition: opacity .25s ease;
		  pointer-events: none;                /* ÂÖ≥Èó≠Êó∂‰∏çÂèØÁÇπÂáª */
		}
		.wallet-modal.show {
		  opacity: 1;
		  pointer-events: auto;                /* ÊâìÂºÄÊó∂ÂèØÁÇπÂáª */
		}
		.wallet-modal-content {
		  position: relative;
		  background: #fff;
		  border-radius: 24px;
		  padding: 36px;
		  max-width: 440px;
		  width: 92%;
		  max-height: 80vh;
		  overflow-y: auto;
		  box-shadow: 0 12px 40px rgba(0,0,0,.12); /* ‚úÖ Ê≠£Á°ÆÂÜôÊ≥ï */
		  transform: scale(.95);
		  opacity: 0;
		  transition: transform .25s ease, opacity .25s ease;
		}
		.wallet-modal.show .wallet-modal-content {
		  transform: scale(1);
		  opacity: 1;
		}

        /* ÁßªÈô§ÂèØËÉΩÂØºËá¥ÈóÆÈ¢òÁöÑÂä®Áîª */
        @keyframes modalSlideIn {
            to { transform: none !important; }
        }

        .wallet-modal-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .wallet-modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
            font-family: 'Inter', sans-serif;
        }

        .wallet-modal-subtitle {
            font-size: 0.875rem;
            color: #6b7280;
            font-weight: 400;
            line-height: 1.5;
        }

        .wallet-close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #6b7280;
        }

        .wallet-close-btn:hover {
            background: #e5e7eb;
            color: #374151;
        }

        /* Èí±ÂåÖÈÄâÈ°πÂç°Áâá */
        /* Êõ¥Á¥ßÂáëÁöÑÂç°Áâá‰∏éË°åË∑ù */
		.wallet-option {
		  display: flex;
		  align-items: center;
          justify-content: center;
		  gap: 12px;
		  padding: 12px 14px;          /* Âéü 20px -> Êõ¥Á¥ßÂáë */
		  border: 1px solid #e5e7eb;
		  border-radius: 8px;          /* Âéü 16px/24px -> 8px */
		  background: #fff;
		  transition: background .2s ease, border-color .2s ease, transform .2s ease;
		}
		.wallet-option:hover {
		  border-color: #d1d5db;
		  background: #f9fafb;         /* ÂéªÊéâÂ§ßÈù¢ÁßØÊ∏êÂèò */
		  transform: translateY(-1px);
		}
		/* ÂàóË°®È°πÈó¥Ë∑ùÊõ¥Á¥ßÂáë */
		.wallet-options { 
		  display: flex; 
		  flex-direction: column; 
		  gap: 12px;                   /* Âéü 16px -> 12px */
		}

		/* Èí±ÂåÖÊñáÂ≠ó‰ø°ÊÅØ */
		/* Ê†áÈ¢òÊñáÂ≠óÔºöÊ≤âÁ®≥„ÄÅÂ∑¶ÂØπÈΩêÔºå‰∏çÊºÇÊµÆ */
		.wallet-name {
		  font-size: 14px;
		  font-weight: 500;
		  color: #111827;
		  line-height: 1;

		}
		/* ÂâØÊ†áÈ¢òÔºàÂ¶ÇÊûú‰ΩøÁî®ÔºâÂº±ÂåñÊòæÁ§∫ÔºåÂêåÊ†∑Â∑¶ÈΩê */
		.wallet-description {
		  font-size: 12px;
		  color: #6b7280;
		  line-height: 1.2;
		}
		/* Áä∂ÊÄÅ‰∏éÁÆ≠Â§¥ */
		.wallet-status.status-available { background: rgba(16,185,129,.1); color:#059669; }
        .wallet-icon-wrap{
		  width:24px;
		  height:24px;
		  display:flex;
		  align-items:center;
		  justify-content:center;
		  flex-shrink:0;            /* Èò≤Ê≠¢Êå§Âéã */
		}
		/* Êîæ <img> ÁöÑÊÉÖÂÜµ */
		.wallet-icon-wrap img{
		  width:100%;
		  height:100%;
		  object-fit:contain;       /* Á≠âÊØî‰∏çÂèòÂΩ¢ */
		  display:block;
		}
		/* Êîæ <svg> Áõ¥ÊèíÁöÑÊÉÖÂÜµ */
		.wallet-icon-wrap svg{
		  width:24px;
		  height:24px;
		  display:block;
		}

        /* Account ÊåâÈíÆÂè≥‰æßÁöÑÂ∞èÂõæÊ†á */
		#walletTypeIcon {
		  width: 18px;
		  height: 18px;
		  margin-left: 8px;
		  vertical-align: middle;
		  display: none;        /* ÈªòËÆ§ÈöêËóèÔºåËøûÊé•ÂêéÂÜçÊòæÁ§∫ */
		  object-fit: contain;  /* Èò≤Ê≠¢ÂèòÂΩ¢ */
		}

        .wallet-footer {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #6b7280;    /* ÁÅ∞Ëâ≤Ôºå‰ΩéË∞É‰∏ÄÁÇπ */
            font-weight: 400;
        }


        /* ÂìçÂ∫îÂºèËÆæËÆ° */
        @media (max-width: 480px) {
            .wallet-modal-content {
                padding: 24px;
                margin: 20px;
                width: calc(100% - 40px);
            }

            .wallet-modal-title {
                font-size: 1.25rem;
            }

            .wallet-name {
                font-size: 1rem;
            }
        }

/* Network modal (Áã¨Á´ã‰∫é wallet modal) */
		.network-modal {
		  position: fixed;
		  inset: 0;
		  display: flex;
		  align-items: center;
		  justify-content: center;
		  background: rgba(17, 24, 39, 0.6);
		  backdrop-filter: blur(2px);
		  opacity: 0;
		  pointer-events: none;
		  transition: opacity .25s ease;
		  z-index: 10010;
		}
		.network-modal.show {
		  opacity: 1;
		  pointer-events: auto;
		}
		.network-modal-content {
		  width: min(420px, 92vw);
		  background: #fff;
		  border-radius: 12px;                  /* ÂúÜËßíÊõ¥Â∞èÔºåÊõ¥Á¥ßÂáë */
		  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
		  padding: 24px 24px 20px;
		  transform: scale(.95);
		  opacity: 0;
		  transition: transform .25s ease, opacity .25s ease;
		}
		.network-modal.show .network-modal-content {
		  transform: scale(1);
		  opacity: 1;
		}
		.network-modal-header {
		  display: flex;
		  align-items: center;
		  justify-content: space-between;
		  margin-bottom: 24px;
		}
		.network-modal-title {
		  font-size: 18px;
		  font-weight: 600;
		  color: #1f2937;
		}
		.network-modal-subtitle {
		  font-size: 13px;
		  color: #6b7280;
		  margin-top: 4px;
		}
		.network-close-btn {
		  border: none;
		  background: transparent;
		  font-size: 18px;
		  line-height: 1;
		  cursor: pointer;
		  color: #6b7280;
		  transition: color .2s ease;
		}
		.network-close-btn:hover {
		  color: #111827;
		}
		/* ÂºπÁ™óÈáåÁöÑÊåâÈíÆÊ†∑ÂºèÔºöÊõ¥Á¥ßÂáëÔºåËßÑÊï¥ */
		.network-modal-content .wallet-option {
		  display: flex;
		  align-items: center;       /* ÂõæÊ†á + ÊñáÂ≠óÂûÇÁõ¥Â±Ö‰∏≠ */
		  justify-content: flex-start;
		  gap: 12px;
		  padding: 12px 14px;        /* Á¥ßÂáëÂÜÖËæπË∑ù */
		  border: 1px solid #e5e7eb;
		  border-radius: 8px;        /* Â∞èÂúÜËßí */
		  background: #fff;
		  transition: background .2s ease, border-color .2s ease, transform .2s ease;
		}
		.network-modal-content .wallet-option:hover {
		  border-color: #d1d5db;
		  background: #f9fafb;       /* ÁÆÄÂçïÊµÖÁÅ∞ hover */
		  transform: translateY(-1px);
		}
		.network-modal-content .wallet-name {
		  font-size: 14px;
		  font-weight: 500;
		  color: #111827;
		}
		.network-modal-content .wallet-description {
		  font-size: 12px;
		  color: #6b7280;
		}

        /* --- Current Network badge --- */
		.network-badge{
		  display:inline-flex; align-items:center; gap:8px;
		  background:#f3f4f6; color:#1f2937;
		  border:1px solid #e5e7eb; border-radius:999px;
		  padding:6px 12px; margin-right:12px;
		  height:34px; line-height:1; white-space:nowrap;
		}
		.network-badge__icon{ width:20px; height:20px; object-fit:contain; display:block }
		.network-badge__text{ font-size:14px; font-weight:600; letter-spacing:.2px }
		.network-badge__caret{ width:16px; height:16px; opacity:.6 }
		/* @media (max-width: 768px){
		  .network-badge{ display:none !important; }
		} */

    /* Token logo styling */
    .token-logo {
        width: 16px;
        height: 16px;
        display: inline-block;
        vertical-align: middle;
        margin-left: 4px;
    }

    .token-icon {
        width: 16px;
        height: 16px;
        display: inline-block;
        vertical-align: middle;
        margin-left: 4px;
    }

    .model-name-clickable {
        color: #8b5cf6;
        cursor: pointer;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.2s ease;
    }

    .model-name-clickable:hover {
        color: #7c3aed;
        text-decoration: underline;
    }

    /* Model Card Modal Styles */
        :root{
          --mv-bg: #ffffff;
          --mv-panel: #f8fafc;
          --mv-soft: rgba(0,0,0,.08);
          --mv-border: rgba(0,0,0,.12);
          --mv-text: #1f2937;
          --mv-muted: #6b7280;
          --mv-accent: #8b7cf6;
          --mv-emerald: #10b981;
          --mv-shadow: 0 20px 40px rgba(0,0,0,.1);
        }

        .mvpro-overlay{
          position: fixed; inset:0; display:none; align-items:center; justify-content:center;
          background: rgba(0,0,0,.4);
          backdrop-filter: blur(4px);
          z-index: 10000;
        }
        .mvpro-overlay.active{ display:flex; }

        .mvpro-card{
          width: min(980px, 94vw);
          background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
          border: 1px solid #e5e7eb;
          border-radius: 16px;
          color: var(--mv-text);
          box-shadow: var(--mv-shadow);
        }

        .mvpro-header{
          display:flex; align-items:center; justify-content:space-between;
          padding: 20px 24px;
          border-bottom: 1px solid #e5e7eb;
          background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
          border-radius: 16px 16px 0 0;
        }
        .mvpro-title{
          font-size: 22px; font-weight: 700; color: #1f2937;
        }
        .mvpro-close{
          border:0; background: rgba(0,0,0,.06); color:#6b7280;
          width: 36px; height: 36px; border-radius: 8px; cursor:pointer;
          font-size: 18px; font-weight: bold;
        }
        .mvpro-close:hover{ background: rgba(0,0,0,.12); color: #374151; }

        .mvpro-body{
          display:grid; grid-template-columns: 1.2fr .9fr; gap: 24px;
          padding: 24px;
        }
        .mvpro-info .mvpro-row{ margin-bottom: 16px; }
        .mvpro-label{ display:block; color: var(--mv-muted); font-weight: 600; font-size: 12px; margin-bottom:6px; text-transform: uppercase; letter-spacing:.5px;}
        .mvpro-text{ line-height: 1.6; color: var(--mv-text); font-size: 14px; }

        .mvpro-pills{ display:flex; gap:10px; flex-wrap:wrap; margin: 16px 0 8px; }
        .mvpro-pill{
          display:flex; align-items:center; gap:8px; padding:8px 12px;
          border-radius: 20px; border:1px solid #e5e7eb;
          background: #f9fafb; color: #374151; font-size: 13px;
        }
        .mvpro-pill strong{ color:#1f2937; font-weight: 600; }

        .mvpro-kpis{
          display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap: 12px; margin-top: 8px;
        }
        .mvpro-kpi{
          background: #f9fafb;
          border:1px solid #e5e7eb;
          border-radius: 12px; padding: 12px 14px;
        }
        .mvpro-kpi .lbl{ font-size: 12px; color: var(--mv-muted); margin-bottom: 6px; }
        .mvpro-kpi .val{ font-size: 16px; font-weight: 700; color: #1f2937; }

        .mvpro-chart{
          background: #f9fafb;
          border:1px solid #e5e7eb;
          border-radius: 12px; padding: 20px;
          display:flex; flex-direction:column; align-items:center; justify-content:center;
        }
        .mvpro-chart-title{ font-weight: 700; margin-bottom: 16px; color: #1f2937; }
        .mvpro-legend{ display:flex; gap: 18px; margin-top: 12px; color: #6b7280; font-size: 13px; }
        .mvpro-legend .item{ display:flex; align-items:center; gap:8px; }
        .mvpro-dot{ width:10px; height:10px; border-radius:50%; display:inline-block; }
        .mvpro-dot.p{ background: var(--mv-accent); }
        .mvpro-dot.r{ background: var(--mv-emerald); }

        .mvpro-actions{
          display:flex; gap: 10px; justify-content:flex-end; padding: 16px 24px 20px;
          border-top: 1px solid #e5e7eb;
          background: linear-gradient(135deg, #f9fafb 0%, #f3f4f6 100%);
          border-radius: 0 0 16px 16px;
        }
        .mvpro-btn{
          appearance:none; border:1px solid #d1d5db;
          background: #ffffff; color: #374151;
          padding: 10px 16px; border-radius: 8px; cursor:pointer;
          font-weight: 500; transition: all 0.2s;
        }
        .mvpro-btn:hover{ background: #f3f4f6; transform: translateY(-1px); }
        .mvpro-btn.primary{ border-color: transparent; background: linear-gradient(135deg,#8b7cf6,#7c3aed); color: white; }
        .mvpro-btn.success{ border-color: transparent; background: linear-gradient(135deg,#10b981,#059669); color: white; }

        body.mvpro-lock{ overflow: hidden; }

        @media (max-width: 920px){
          .mvpro-body{ grid-template-columns: 1fr; }
        }
    
        /* Follow X Modal */
        .follow-x-modal {
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(2px);
            z-index: 10001;
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .follow-x-modal.show {
            display: flex;
            opacity: 1;
        }

        .follow-x-modal-content {
            position: relative;
            background: white;
            border-radius: 16px;
            padding: 32px;
            width: 90%;
            max-width: 480px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            transform: scale(0.95);
            transition: transform 0.25s ease;
        }

        .follow-x-modal.show .follow-x-modal-content {
            transform: scale(1);
        }

        .follow-x-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: #f3f4f6;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            font-size: 18px;
            color: #6b7280;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .follow-x-close:hover {
            background: #e5e7eb;
            color: #374151;
        }

        .follow-x-modal-header {
            text-align: center;
            margin-bottom: 28px;
        }

        .follow-x-modal-title {
            font-size: 24px;
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .follow-x-modal-subtitle {
            font-size: 14px;
            color: #6b7280;
            line-height: 1.6;
        }

        .follow-x-input-group {
            margin-bottom: 20px;
        }

        .follow-x-input-group label {
            display: block;
            font-size: 13px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
        }

        .follow-x-input-wrapper {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .follow-x-input {
            flex: 1;
            padding: 12px 14px;
            border: 1px solid #d1d5db;
            border-radius: 8px;
            font-size: 14px;
            color: #111827;
            transition: all 0.2s ease;
        }

        .follow-x-input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
        }

        .follow-x-input:readonly {
            background: #f9fafb;
            color: #6b7280;
        }

        .follow-x-button {
            padding: 12px 20px;
            background: linear-gradient(135deg, #1da1f2, #0c85d0);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            white-space: nowrap;
        }

        .follow-x-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(29, 161, 242, 0.3);
        }

        .confirm-button {
            width: 100%;
            padding: 14px;
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 8px;
        }

        .confirm-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .confirm-button:disabled {
            background: #d1d5db;
            cursor: not-allowed;
            transform: none;
        }

        .status-message {
            margin-top: 16px;
            padding: 12px;
            border-radius: 8px;
            font-size: 13px;
            text-align: center;
        }

        .status-message.pending {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #fcd34d;
        }

        .status-message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        .status-message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        @media (max-width: 480px) {
            .follow-x-modal-content {
                padding: 24px;
                width: 95%;
            }
            
            .follow-x-input-wrapper {
                flex-direction: column;
                gap: 8px;
            }
            
            .follow-x-button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <!-- Left Section -->
            <div class="header-left">
                <!-- ÁßªÂä®Á´ØËèúÂçïÊåâÈíÆ -->
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                    </svg>
                </button>
                <div class="logo" onclick="window.location.href='index.html'" style="cursor: pointer;">
                    <img src="svg/I3 logo.svg" alt="Intelligence Cubed" class="logo-image" style="height: 40px; width: auto;">
                </div>
                <nav class="nav-menu">
                    <button class="nav-item" onclick="window.location.href='index.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Chats
                    </button>
                    <button class="nav-item" onclick="window.location.href='modelverse.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M12 2L2 7l10 5 10-5-10-5z" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="m2 17 10 5 10-5" stroke="currentColor" stroke-width="2"/>
                            <path d="m2 12 10 5 10-5" stroke="currentColor" stroke-width="2"/>
                        </svg>
                        Modelverse
                    </button>
                    <button class="nav-item active">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Benchmark
                    </button>
                    <button class="nav-item" onclick="window.location.href='canvas.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="2" fill="none"/>
                            <path d="M9 9h6v6H9z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Canvas
                    </button>
                    <button class="nav-item" onclick="window.location.href='workflow.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" stroke="currentColor" stroke-width="2" fill="none"/>
                        </svg>
                        Workflows
                    </button>
                    <button class="nav-item" onclick="window.location.href='mycart.html'">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                            <path d="M7 4V2a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            <path d="M5 4h14l-1 14H6L5 4Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        MyCart
                    </button>
                </nav>

                <!-- ÁßªÂä®Á´ØÂØºËà™ËèúÂçï -->
                <div class="mobile-nav-overlay" onclick="closeMobileMenu()"></div>
                <div class="mobile-nav-menu">
                    <button class="nav-item" onclick="window.location.href='index.html'">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                        Chats
                    </button>
                    <button class="nav-item" onclick="window.location.href='modelverse.html'">Modelverse</button>
                    <button class="nav-item active" onclick="window.location.href='benchmark.html'">Benchmark</button>
                    <button class="nav-item" onclick="window.location.href='canvas.html'">Canvas</button>
                    <button class="nav-item" onclick="window.location.href='workflow.html'">Workflows</button>
                    <button class="nav-item" onclick="window.location.href='mycart.html'">MyCart</button>
                </div>
            </div>

            <!-- Right Section -->
			<div class="header-right">
                <button id="networkBadge" class="network-badge" type="button" style="display:none" onclick="openNetworkPickerModal()">
				  <img class="network-badge__icon" src="" alt="">
				  <span class="network-badge__text">Network</span>
			        <svg class="network-badge__caret" width="12" height="12" viewBox="0 0 24 24">
				        <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/>
				    </svg>
				</button>
			  <div class="user-section">
			    <div id="accountDropdownMount"></div>
			  </div>
			</div>
        </div>
    </header>

                <!-- Right Section -->
            <div class="header-right">
                <!-- Current Network badge (shows only after wallet connected) -->
                <button id="networkBadge" class="network-badge" type="button" style="display:none" onclick="openNetworkPickerModal()">
				  <img class="network-badge__icon" src="" alt="">
				  <span class="network-badge__text">Network</span>
			        <svg class="network-badge__caret" width="12" height="12" viewBox="0 0 24 24">
				        <path d="M6 9l6 6 6-6" fill="none" stroke="currentColor" stroke-width="2"/>
				    </svg>
				</button>
                <div id="networkPickerMount"></div>
                <div class="user-section">
                    <div id="accountDropdownMount"></div>
                </div>
            </div>
        </div>
    </header>


    <script>
	(function syncRenderNetworkBadge(){
	  try {
	    // 1) ËØªÂèñÊú¨Âú∞"È¶ñÈÄâÁΩëÁªú"Ôºà‰Ω†Â∑≤Êúâ getPreferredNetworkÔºâ
	    var pref = (window.getPreferredNetwork && window.getPreferredNetwork()) || null;
	    // 2) Âø´ÈÄüÊò†Â∞ÑÔºà‰ªÖÁî®‰∫éÈ¶ñÂ±èÔºå‰∏ç‰æùËµñ‰ªª‰Ωï SDKÔºâ
	    var ICON = {
	      ethereum: '/svg/chains/ethereum.svg',
	      bnb:      '/svg/chains/bnb.svg',
	      polygon:  '/svg/chains/polygon-zkevm.svg',
	      arbitrum: '/svg/chains/arbitrum.svg',
	      optimism: '/svg/chains/optimism.svg',
	      solana:   '/svg/chains/solana.svg',
          opbnb:   '/svg/chains/opbnb.svg',
          zksync:   '/svg/chains/zksync.svg',
          base:   '/svg/chains/base.svg',   
	    };
	    var NAME = {
	      ethereum: 'Ethereum',
	      bnb:      'BNB Chain',
	      polygon:  'Polygon',
	      arbitrum: 'Arbitrum',
	      optimism: 'Optimism',
	      solana:   'Solana',
          opbnb:   'opBNB',
          zksync:   'Zksync',
          base:   'Base',
	    };
	    // 3) ÊâæÂà∞ÂæΩÁ´†ËäÇÁÇπÔºà‰Ω†ÊåâÈíÆÈáåÂ∑≤ÊúâËøô‰∫õ idÔºâ
	    var badge  = document.getElementById('networkBadge');
	    var iconEl = document.getElementById('networkBadgeIcon');
	    var textEl = document.getElementById('networkBadgeText');
	    if (!badge || !iconEl || !textEl) return;
	    // 4) ËÆ°ÁÆóÈ¶ñÂ±è keyÔºöSolana Áõ¥Êé•ÊòæÁ§∫ solanaÔºåÂÖ∂ÂÆÉÈªòËÆ§ ethereum
	    var key  = (pref && pref.key)  || 'ethereum';
	    var kind = (pref && pref.kind) || 'evm';
	    if (kind === 'solana') key = 'solana';
	    // 5) ÂêåÊ≠•Ê∏≤ÊüìÔºå‰∏çÁ≠â SDK
	    iconEl.src = ICON[key] || ICON.ethereum;
	    iconEl.alt = NAME[key] || 'Network';
	    textEl.textContent = NAME[key] || 'Network';
	    badge.style.display = 'inline-flex';
	    badge.style.visibility = 'visible'; // Ëß£Èô§ÂàùÂßãÈöêËóè
	  } catch (e) {
	    // ÈùôÈªòÂ§±Ë¥•ÔºåÈÅøÂÖçÈòªÂ°ûÈ¶ñÂ±è
	  }
	})();
	</script>

    <!-- Main Layout -->
    <div class="main-layout full-width-layout">
        <!-- Main Content -->
        <main class="modelverse-content full-width">
            <div class="benchmark-container">
        <!-- Header Section -->
        <div class="benchmark-header">
            <h1 class="benchmark-title">Model Benchmark</h1>
            
            <!-- Desktop Search Input (Outside the box, left aligned) -->
            <div class="desktop-search-wrapper">
                <div class="search-container">
                    <svg class="search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="m21 21-4.35-4.35"/>
                    </svg>
                    <input type="text" id="desktopBenchmarkSearchInput" class="search-input" placeholder="Search models by name, category, or industry..." onkeyup="filterBenchmarkTable()" oninput="filterBenchmarkTable()">
                </div>
            </div>
            
            <!-- Desktop Search Controls -->
            <div class="desktop-search-controls search-controls">
            <div class="header-tabs">
                <button class="tab-btn active" onclick="switchTab('model')">Model Benchmark</button>
                <button class="tab-btn" onclick="switchTab('peer')">Peer Benchmark</button>
            </div>
            
            <div class="search-controls">
			    <div class="filter-container">
			        <div class="filter-group">
			            <label class="filter-label">Sort by:</label>
			            <select class="sort-select" onchange="sortBenchmarkTable(this.value)">
			                <option value="total-score">Total Score</option>
			                <option value="usage">Usage</option>
			                <option value="market-change">Market Change</option>
			                <option value="price">Token Price</option>
			                <option value="name">Model Name</option>
			            </select>
			        </div>
			        
			        <div class="filter-group">
			            <label class="filter-label">Filter by Score:</label>
			            <select class="filter-select" onchange="filterByScore(this.value)">
			                <option value="">All Scores</option>
			                <option value="90-100">90-100%</option>
			                <option value="80-89">80-89%</option>
			                <option value="70-79">70-79%</option>
			                <option value="60-69">60-69%</option>
			                <option value="below-60">Below 60%</option>
			            </select>
			        </div>
			        
			        <div class="filter-group">
			            <label class="filter-label">Filter by Usage:</label>
			            <select class="filter-select" onchange="filterByUsage(this.value)">
			                <option value="">All Usage</option>
			                <option value="high">High (>5000)</option>
			                <option value="medium">Medium (1000-5000)</option>
			                <option value="low">Low (&lt;1000)</option>
			            </select>
			        </div>
			        
			        <button class="clear-filters-btn" onclick="clearAllFilters()">
			            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
			                <path d="M3 6h18"/>
			                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
			                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
			                <line x1="10" y1="11" x2="10" y2="17"/>
			                <line x1="14" y1="11" x2="14" y2="17"/>
			            </svg>
			            Clear
			        </button>
			    </div>
			</div>
            </div>

            <!-- Mobile Search & Filters (Á±ª‰ºº Modelverse) -->
            <div class="mobile-search-filters">
                <div class="mobile-search-bar">
                    <input 
                        type="text" 
                        id="mobileBenchmarkSearchInput" 
                        placeholder="Search models..." 
                        class="mobile-search-input"
                        onkeyup="filterBenchmarkTable()"
                    />
                    <button 
                        class="mobile-search-btn"
                        onclick="filterBenchmarkTable()"
                    >
                        Search
                    </button>
                </div>
                <div id="mobileBenchmarkSearchResults" class="mobile-search-results">
                    <!-- ÊêúÁ¥¢ÁªìÊûúÂ∞ÜÊòæÁ§∫Âú®ËøôÈáå -->
                </div>
                <div class="mobile-search-hint">
                    Browse models in Benchmark. Tap to view details.
                </div>
            </div>

        </div>

        <!-- Model Benchmark Table (Desktop) -->
        <div id="modelBenchmarkTable" class="leaderboard-table desktop-table">
            <table class="benchmark-table">
                <thead>
                    <tr>
                        <th>MODEL</th>
                        <th>CATEGORY</th>
                        <th>INDUSTRY</th>
                        <th>PRICE PER 1K TOKENS</th>
                        <th>PRICE PER SHARE</th>
                        <th>MARKET CHANGE</th>
                        <th>USAGE</th>
                        <th>COMPATIBILITY</th>
                        <th>TOTAL SCORE</th>
                        <th>ACTION</th>
                    </tr>
                </thead>
                <tbody id="benchmarkTableBody">
                    <!-- Table rows will be populated by JavaScript -->
                </tbody>
            </table>
        </div>

        <!-- Mobile Model List View -->
        <div class="mobile-models-list" id="mobileBenchmarkModelsList">
            <!-- Ê®°ÂûãÂàóË°®Â∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
        </div>

        <!-- Mobile Model Detail View -->
        <div class="mobile-model-detail" id="mobileBenchmarkModelDetail" style="display: none;">
            <div class="mobile-detail-header">
                <button class="mobile-back-btn" onclick="showMobileBenchmarkListView()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 12H5M12 19l-7-7 7-7"/>
                    </svg>
                </button>
                <h2 class="mobile-detail-title" id="mobileBenchmarkDetailTitle">Model Details</h2>
            </div>
            <div class="mobile-detail-content" id="mobileBenchmarkDetailContent">
                <!-- ËØ¶ÁªÜÂÜÖÂÆπÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>

        <!-- Peer Benchmark Table -->
        <div id="peerBenchmarkTable" class="leaderboard-table desktop-table" style="display: none;">
            <table class="benchmark-table">
                <thead>
                    <tr>
                        <th>MODEL NAME</th>
                        <th>CATEGORY</th>
                        <th>INDUSTRY</th>
                        <th>RATING</th>
                        <th>USAGE</th>
                        <th>
                            VERTICAL INDEX
                            <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
                                 style="color: #6b7280; cursor: help; transition: color 0.2s ease; margin-left: 4px;"
                                 onmouseover="this.style.color='#8b5cf6'; showHeaderTooltip(event, 'VERTICAL INDEX', 'Measures the vertical market penetration and adoption rate of the model in its target industry.')"
                                 onmouseout="this.style.color='#6b7280'; hideHeaderTooltip()">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4"/>
                                <path d="M12 8h.01"/>
                            </svg>
                        </th>
                        <th>
                            PWC SCORE
                            <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
                                 style="color: #6b7280; cursor: help; transition: color 0.2s ease; margin-left: 4px;"
                                 onmouseover="this.style.color='#8b5cf6'; showHeaderTooltip(event, 'PWC SCORE', 'PricewaterhouseCoopers evaluation score measuring model reliability and business impact.')"
                                 onmouseout="this.style.color='#6b7280'; hideHeaderTooltip()">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4"/>
                                <path d="M12 8h.01"/>
                            </svg>
                        </th>
                        <th>
                            ECONOMIC VALUE
                            <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
                                 style="color: #6b7280; cursor: help; transition: color 0.2s ease; margin-left: 4px;"
                                 onmouseover="this.style.color='#8b5cf6'; showHeaderTooltip(event, 'ECONOMIC VALUE', 'Estimated economic value generated by the model in millions of dollars.')"
                                 onmouseout="this.style.color='#6b7280'; hideHeaderTooltip()">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4"/>
                                <path d="M12 8h.01"/>
                            </svg>
                        </th>
                        <th>
                            LATERAL COMP.
                            <svg class="info-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" 
                                 style="color: #6b7280; cursor: help; transition: color 0.2s ease; margin-left: 4px;"
                                 onmouseover="this.style.color='#8b5cf6'; showHeaderTooltip(event, 'LATERAL COMP.', 'Lateral comparison score measuring competitive positioning against similar models.')"
                                 onmouseout="this.style.color='#6b7280'; hideHeaderTooltip()">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M12 16v-4"/>
                                <path d="M12 8h.01"/>
                            </svg>
                        </th>
                        <th>TOTAL SCORE</th>
                        <th>ACTIONS</th>
                    </tr>
                </thead>
                <tbody id="peerBenchmarkTableBody">
                    <!-- Êï∞ÊçÆÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÂ°´ÂÖÖ -->
                </tbody>
            </table>
        </div>


        </main>
    </div>

            <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="contract-config.js"></script>
    <script src="config.js"></script>
    <script src="api-manager.js"></script>
    <script src="model-data.js"></script>
    <script src="benchmark.js"></script>
    <script src="account-dropdown.js"></script>
    <script type="module" src="chains.js"></script>
    <script type="module" src="solana-wallet.js"></script>
    <script type="module" src="solana-checkin.js"></script>
    <script src="social-tasks.js"></script>
    <script>
    function toggleMobileMenu() {
        const menu = document.querySelector('.mobile-nav-menu');
        const overlay = document.querySelector('.mobile-nav-overlay');
        menu.classList.toggle('active');
        overlay.classList.toggle('active');
    }

    function closeMobileMenu() {
        const menu = document.querySelector('.mobile-nav-menu');
        const overlay = document.querySelector('.mobile-nav-overlay');
        menu.classList.remove('active');
        overlay.classList.remove('active');
    }
    </script>
	<script src="wallet-manager.js"></script>
    <script src="credit-api-wrapper.js"></script>
    <script src="unified-spend-credits.js"></script>
	<script src="wallet-integration.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>
    <script src="onchain-checkin.js"></script>
    <!-- Follow X Modal -->
    <div id="followXModal" class="follow-x-modal">
        <div class="follow-x-modal-content">
            <button class="follow-x-close" onclick="closeFollowXModal()">‚úï</button>
            
            <div class="follow-x-modal-header">
                <h2 class="follow-x-modal-title">Follow the Team</h2>
                <p class="follow-x-modal-subtitle">
                    Follow @I3_Cubed on X (Twitter) and enter your Twitter handle to complete the task.
                </p>
            </div>

            <div class="follow-x-input-group">
                <label>1. Follow our X account</label>
                <div class="follow-x-input-wrapper">
                    <input type="text" class="follow-x-input" value="I3_Cubed" readonly>
                    <button class="follow-x-button" onclick="openTwitterProfile()">
                        Follow
                    </button>
                </div>
            </div>

            <div class="follow-x-input-group">
                <label>2. Enter your Twitter handle</label>
                <div class="follow-x-input-wrapper">
                    <input type="text" 
                           id="twitterHandleInput" 
                           class="follow-x-input" 
                           placeholder="@YourTwitterHandle">
                </div>
            </div>

            <button class="confirm-button" onclick="confirmFollowX()">
                Confirm
            </button>

            <div id="followXStatus" class="status-message" style="display: none;"></div>
        </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function(){
        try { injectAccountDropdown('#accountDropdownMount'); } catch (e) { console.warn('injectAccountDropdown failed:', e); }
      });
    </script>
    <!-- Google ËÆ§ËØÅÂäüËÉΩ - Áõ¥Êé•ÂÜÖËÅîÂÆûÁé∞ -->
    <script>
        // Firebase ÈÖçÁΩÆ - ËØ∑ÊõøÊç¢‰∏∫ÊÇ®ÁöÑÂÆûÈôÖÈÖçÁΩÆ
        const firebaseConfig = {
            apiKey: "AIzaSyCYdWqXjUfNbUAMWlcm8neZQGTBTA63pfM",
            authDomain: "i3-testnet.firebaseapp.com",
            projectId: "i3-testnet",
            storageBucket: "i3-testnet.firebasestorage.app",
            messagingSenderId: "892139814159",
            appId: "1:892139814159:web:4df8548eef1d9bd9a1927a",
            measurementId: "G-KCDG3D1FCC"
        };


        // ÈÖçÁΩÆÈ™åËØÅÂáΩÊï∞
        function validateFirebaseConfig() {
            const requiredFields = ['apiKey', 'authDomain', 'projectId', 'storageBucket', 'messagingSenderId', 'appId'];
            const missingFields = requiredFields.filter(field => !firebaseConfig[field] || firebaseConfig[field] === '');
            
            if (missingFields.length > 0) {
                console.error('‚ùå Firebase ÈÖçÁΩÆÁº∫Â∞ëÂ≠óÊÆµ:', missingFields);
                return false;
            }
            
            // Ê£ÄÊü• API Key Ê†ºÂºè
            if (!firebaseConfig.apiKey.startsWith('AIzaSy') || firebaseConfig.apiKey.length < 30) {
                console.error('‚ùå Firebase API Key Ê†ºÂºè‰∏çÊ≠£Á°Æ');
                return false;
            }
            
            console.log('‚úÖ Firebase ÈÖçÁΩÆÈ™åËØÅÈÄöËøá');
            return true;
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let firebaseApp = null;
        let firebaseAuth = null;
        let firebaseDb = null;
        let currentUser = null;

        // ÂàùÂßãÂåñ Firebase - ‰øÆÂ§çÊó∂Â∫èÈóÆÈ¢ò
        async function initializeFirebase() {
            try {
                // È¶ñÂÖàÈ™åËØÅÈÖçÁΩÆ
                if (!validateFirebaseConfig()) {
                    throw new Error('Firebase ÈÖçÁΩÆÈ™åËØÅÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÈÖçÁΩÆ‰ø°ÊÅØ');
                }
                
                console.log('üöÄ ÂºÄÂßãÂàùÂßãÂåñ Firebase...');
                
                // Âä®ÊÄÅÂä†ËΩΩ Firebase SDK
                const { initializeApp } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js');
                const { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                const { getFirestore, initializeFirestore, doc, setDoc, getDoc, updateDoc } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');
                
                // ÂàùÂßãÂåñÂ∫îÁî®
                firebaseApp = initializeApp(firebaseConfig);
                firebaseAuth = getAuth(firebaseApp);
                // Connect to the named Firestore database for this project
                try {
                    firebaseDb = initializeFirestore(firebaseApp, {}, 'i3-testnet');
                } catch (e) {
                    console.warn('initializeFirestore failed, falling back to default database:', e);
                    firebaseDb = getFirestore(firebaseApp);
                }
                // Êö¥Èú≤Âà∞ÂÖ®Â±Ä‰ª•‰æøÂÖ∂‰ªñËÑöÊú¨ËÆøÈóÆ
                window.firebaseApp = firebaseApp;
                window.firebaseAuth = firebaseAuth;
                window.firebaseDb = firebaseDb;
                // ËÆ∞ÂΩïÂ∑≤ËøûÊé•ÁöÑ Firestore Êï∞ÊçÆÂ∫ìÂêçÁß∞
                try {
                    const proj = (firebaseDb && firebaseDb._databaseId && firebaseDb._databaseId.projectId) || firebaseConfig.projectId;
                    const dbId = (firebaseDb && firebaseDb._databaseId && firebaseDb._databaseId.database) || '(default)';
                    console.log('‚úÖ Firestore ready:', { projectId: proj, databaseId: dbId });
                } catch (_) {}
                
                // üîë ÂÖ≥ÈîÆ‰øÆÂ§çÔºöÊö¥Èú≤Âà∞ window,Êñπ‰æøÂÖ∂‰ªñËÑöÊú¨ & Console Ë∞ÉËØï
                Object.assign(window, { firebaseApp, firebaseAuth, firebaseDb });
                
                // Notify listeners that Firebase is ready
                try { window.dispatchEvent(new Event('firebaseReady')); } catch (_) {}
                
                console.log('‚úÖ Firebase ÂàùÂßãÂåñÊàêÂäü');
                
                // ËÆæÁΩÆËÆ§ËØÅÁä∂ÊÄÅÁõëÂê¨Âô®
                onAuthStateChanged(firebaseAuth, async (user) => {
                    if (user) {
                        console.log('Áî®Êà∑Â∑≤ÁôªÂΩï:', user.email);
                        currentUser = user;
                        // üîë ËÆ©ÂÖ∂‰ªñÈÄªËæëËØÜÂà´Â∑≤ÁôªÂΩï
                        window.currentUser = user;
                        // ËÆ∞ÂΩïÁôªÂΩïÊó∂Èó¥‰∏éÊ¨°Êï∞
                        try {
                            await upsertUserLogin(user);
                            console.log('üïí Google login at (client):', new Date().toISOString());
                        } catch (e) { console.warn('ËÆ∞ÂΩïÁôªÂΩïÊó∂Èó¥Â§±Ë¥•(ÂèØÂøΩÁï•):', e); }
                        // Ëã•Èí±ÂåÖÂ∑≤ËøûÊé•ÔºåËá™Âä®Â∞ÜÈí±ÂåÖ‰øùÂ≠òÂà∞ users/<uid>
                        try {
                            if (window.walletManager && window.walletManager.isConnected && window.walletManager.walletAddress) {
                                const address = window.walletManager.walletAddress;
                                if (window.ethereum && typeof window.ethereum.request === 'function') {
                                    window.ethereum.request({ method: 'eth_chainId' }).then((cid) => {
                                        if (typeof window.onWalletConnected === 'function') window.onWalletConnected(address, cid);
                                    }).catch(() => {
                                        if (typeof window.onWalletConnected === 'function') window.onWalletConnected(address);
                                    });
                                } else if (typeof window.onWalletConnected === 'function') {
                                    window.onWalletConnected(address);
                                }
                            }
                        } catch (linkErr) {
                            console.warn('Ëá™Âä®ÈìæÊé•Èí±ÂåÖÂà∞Áî®Êà∑Â§±Ë¥•ÔºàÂèØÂøΩÁï•Ôºâ:', linkErr);
                        }
                        updateUIForSignedInUser(user);
                        loadUserData(user.uid);
                    } else {
                        console.log('Áî®Êà∑Â∑≤ÈÄÄÂá∫');
                        currentUser = null;
                        window.currentUser = null; // ÂèØÈÄâ
                        updateUIForSignedOutUser();
                    }
                });
                
                // Êõ¥Êñ∞Áä∂ÊÄÅÊòæÁ§∫ÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®ÔºåÂÅöÈò≤Âæ°ÊÄßÂà§Êñ≠Ôºâ
                (function(){
                    const el = document.getElementById('googleSignInStatus');
                })();
                
                // üîë ÂÖ≥ÈîÆ‰øÆÂ§çÔºöFirebase ÂàùÂßãÂåñÊàêÂäüÂêéÔºåÈáçÊñ∞ÁªëÂÆöÁôªÂΩïÊåâÈíÆ‰∫ã‰ª∂Âπ∂ÂêØÁî®ÊåâÈíÆ
                bindGoogleSignInEvent();
                
                // ÂêØÁî®ÁôªÂΩïÊåâÈíÆÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®Ôºâ
                (function(){
                    const googleSignInBtn = document.getElementById('googleSignInBtn');
                    if (googleSignInBtn) {
                        googleSignInBtn.disabled = false;
                        googleSignInBtn.style.opacity = '1';
                        googleSignInBtn.style.cursor = 'pointer';
                        console.log('‚úÖ Google ÁôªÂΩïÊåâÈíÆÂ∑≤ÂêØÁî®');
                    }
                })();
                
            } catch (error) {
                console.error('‚ùå Firebase ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                const el = document.getElementById('googleSignInStatus');
                if (el) el.textContent = 'Firebase Âä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï';
            }
        }

        // Google ÁôªÂΩïÂ§ÑÁêÜÂáΩÊï∞ - ÂÆâÂÖ®ÁâàÊú¨
        async function handleGoogleSignIn(mode) {
            try {
                // ÂèåÈáçÊ£ÄÊü•ÔºöÁ°Æ‰øù Firebase Â∑≤ÂàùÂßãÂåñ
                if (!firebaseAuth || !firebaseApp) {
                    console.error('‚ùå Firebase Êú™ÂàùÂßãÂåñ');
                    alert('Firebase ËøòÊú™Âä†ËΩΩÂÆåÊàêÔºåËØ∑Á®çÂêéÂÜçËØï');
                    return;
                }
                
                (function(){
                    const el = document.getElementById('googleSignInStatus');
                    if (el) el.textContent = 'Logging in...';
                })();
                
                const { GoogleAuthProvider, signInWithPopup, signInWithRedirect } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                const provider = new GoogleAuthProvider();
                // Âº∫Âà∂ÊØèÊ¨°ÁôªÂΩïÊó∂ÈÉΩË¶ÅÊ±ÇÁî®Êà∑ÈáçÊñ∞ÈÄâÊã©Ë¥¶Êà∑ÊàñËæìÂÖ•ÂØÜÁ†Å
                provider.setCustomParameters({
                    prompt: 'login'
                });
                
                // ÂΩìÁî±Èí±ÂåÖËøûÊé•Ëá™Âä®Ëß¶ÂèëÊó∂Ôºå‰ºòÂÖàÂ∞ùËØïÂºπÁ™óÔºåËã•Ë¢´Êã¶Êà™ÂàôÂõûÈÄÄÂà∞ÈáçÂÆöÂêë
                if (mode === 'auto') {
                    try {
                        const result = await signInWithPopup(firebaseAuth, provider);
                        console.log('‚úÖ ÁôªÂΩïÊàêÂäü:', result.user.email);
                        (function(){
                            const el = document.getElementById('googleSignInStatus');
                            if (el) el.textContent = 'Log in successfulÔºÅ';
                        })();
                    } catch (popupErr) {
                        const code = popupErr && popupErr.code;
                        if (code === 'auth/popup-blocked' || code === 'auth/cancelled-popup-request') {
                            console.warn('Popup blocked or cancelled; falling back to redirect login');
                            await signInWithRedirect(firebaseAuth, provider);
                            // È°µÈù¢Â∞ÜË∑≥ËΩ¨ËøõË°åÁôªÂΩï
                            return;
                        }
                        throw popupErr;
                    }
                } else {
                    const result = await signInWithPopup(firebaseAuth, provider);
                    console.log('‚úÖ ÁôªÂΩïÊàêÂäü:', result.user.email);
                    (function(){
                        const el = document.getElementById('googleSignInStatus');
                        if (el) el.textContent = 'Log in successfulÔºÅ';
                    })();
                }
                
            } catch (error) {
                console.error('‚ùå Log in failed:', error);
                if (error.code === 'auth/unauthorized-domain') {
                    const el = document.getElementById('googleSignInStatus');
                    if (el) el.textContent = 'ÂüüÂêçÊú™ÊéàÊùÉÔºåËØ∑Âú® Firebase ÊéßÂà∂Âè∞Ê∑ªÂä†ÂΩìÂâçÂüüÂêç';
                } else {
                    const el = document.getElementById('googleSignInStatus');
                    if (el) el.textContent = 'Log in failed: ' + error.message;
                }
            }
        }

        // Expose sign-in function globally so other scripts can invoke it
        window.handleGoogleSignIn = handleGoogleSignIn;

        // üîë ÂÖ≥ÈîÆ‰øÆÂ§çÔºöÂÆâÂÖ®ÁöÑÊåâÈíÆ‰∫ã‰ª∂ÁªëÂÆöÂáΩÊï∞
        function bindGoogleSignInEvent() {
            const googleSignInBtn = document.getElementById('googleSignInBtn');
            if (googleSignInBtn) {
                // ÁßªÈô§ÊóßÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®ÔºàÂ¶ÇÊûúÊúâÁöÑËØùÔºâ
                googleSignInBtn.replaceWith(googleSignInBtn.cloneNode(true));
                
                // Ëé∑ÂèñÊñ∞ÁöÑÊåâÈíÆÂºïÁî®
                const newBtn = document.getElementById('googleSignInBtn');
                
                // ÁªëÂÆöÊñ∞ÁöÑ‰∫ã‰ª∂ÁõëÂê¨Âô®
                newBtn.addEventListener('click', handleGoogleSignIn);
                
                console.log('‚úÖ Google ÁôªÂΩïÊåâÈíÆ‰∫ã‰ª∂ÁªëÂÆöÊàêÂäü');
            }
        }

        // Êõ¥Êñ∞Â∑≤ÁôªÂΩïÁî®Êà∑ÁöÑ UI
        function updateUIForSignedInUser(user) {
            // ÈöêËóè Google ÁôªÂΩïÊåâÈíÆÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®Ôºâ
            (function(){
                const btn = document.getElementById('googleSignInBtn');
                if (btn) btn.style.display = 'none';
                const status = document.getElementById('googleSignInStatus');
                if (status) status.textContent = `Already Logged in: ${user.email}`;
            })();
            
            // ‰øùÊåÅÈí±ÂåÖËøûÊé•ÈÉ®ÂàÜÂèØËßÅÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®Ôºâ
            (function(){
                const ws = document.getElementById('walletSection');
                if (ws) ws.style.display = 'block';
            })();
            
            // Êõ¥Êñ∞Ë¥¶Êà∑ÊåâÈíÆÊñáÊú¨
            const accountBtnText = document.getElementById('accountBtnText');
            if (accountBtnText) {
                accountBtnText.textContent = user.displayName || user.email;
            }
            
            // ÊòæÁ§∫ logout ÊåâÈíÆ
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.style.display = 'block';
            }
            
            console.log('‚úÖ Áî®Êà∑Â∑≤ÁôªÂΩïÔºåÈí±ÂåÖÂäüËÉΩ‰øùÊåÅÂèØËßÅÔºålogout ÊåâÈíÆÂ∑≤ÊøÄÊ¥ª');
        }

        // Êõ¥Êñ∞Êú™ÁôªÂΩïÁî®Êà∑ÁöÑ UI
        function updateUIForSignedOutUser() {
            // ÊòæÁ§∫ Google ÁôªÂΩïÊåâÈíÆÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®Ôºâ
            (function(){
                const btn = document.getElementById('googleSignInBtn');
                if (btn) btn.style.display = 'flex';
                const status = document.getElementById('googleSignInStatus');
            })();
            
            // ‰øùÊåÅÈí±ÂåÖËøûÊé•ÈÉ®ÂàÜÂèØËßÅÔºàÂÖÉÁ¥†ÂèØËÉΩ‰∏çÂ≠òÂú®Ôºâ
            (function(){
                const ws = document.getElementById('walletSection');
                if (ws) ws.style.display = 'block';
            })();
            
            // ÊÅ¢Â§çË¥¶Êà∑ÊåâÈíÆÊñáÊú¨
            const accountBtnText = document.getElementById('accountBtnText');
            if (accountBtnText) {
                accountBtnText.textContent = 'Login';
            }
            
            // ÈöêËóè logout ÊåâÈíÆ
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.style.display = 'none';
            }
            
            console.log('‚ùå Áî®Êà∑Â∑≤ÈÄÄÂá∫ÔºåÈí±ÂåÖÂäüËÉΩ‰øùÊåÅÂèØËßÅÔºålogout ÊåâÈíÆÂ∑≤ÈöêËóè');
        }

        // Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆ
        async function loadUserData(uid) {
            try {
                if (!firebaseDb) return;
                
                const { doc, getDoc, setDoc } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');
                const userRef = doc(firebaseDb, 'users', uid);
                const userDoc = await getDoc(userRef);
                
                if (userDoc.exists()) {
                    console.log('Áî®Êà∑Êï∞ÊçÆÂ∑≤Â≠òÂú®');
                } else {
                    // ÂàõÂª∫Êñ∞Áî®Êà∑ÊñáÊ°£
                    const userData = {
                        uid: uid,
                        email: currentUser.email,
                        displayName: currentUser.displayName,
                        photoURL: currentUser.photoURL,
                        lastLogin: new Date(),
                        createdAt: new Date(),
                        isActive: true
                    };
                    
                    await setDoc(userRef, userData);
                    console.log('‚úÖ Êñ∞Áî®Êà∑ÊñáÊ°£Â∑≤ÂàõÂª∫');
                }
            } catch (error) {
                console.error('‚ùå Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆÂ§±Ë¥•:', error);
            }
        }

        // Á°Æ‰øùÁî®Êà∑ÊñáÊ°£Â≠òÂú®Âπ∂ËÆ∞ÂΩïÊú¨Ê¨°ÁôªÂΩïÊó∂Èó¥
        async function upsertUserLogin(user) {
            try {
                if (!firebaseDb || !user || !user.uid) return;
                const { doc, getDoc, setDoc, updateDoc, serverTimestamp, increment } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');
                const userRef = doc(firebaseDb, 'users', user.uid);
                const snap = await getDoc(userRef);
                if (!snap.exists()) {
                    await setDoc(userRef, {
                        uid: user.uid,
                        email: user.email || null,
                        displayName: user.displayName || null,
                        photoURL: user.photoURL || null,
                        createdAt: serverTimestamp(),
                        isActive: true
                    }, { merge: true });
                }
                await updateDoc(userRef, {
                    lastLoginAt: serverTimestamp(),
                    lastLoginClientAt: new Date().toISOString(),
                    lastLoginProvider: 'google',
                    lastLoginEmail: user.email || null,
                    loginCount: increment(1)
                });
            } catch (e) {
                console.warn('upsertUserLogin error:', e);
            }
        }

        // ÊØèÊó•Á≠æÂà∞Â§ÑÁêÜÂáΩÊï∞ - ÊîØÊåÅ Admin Êú¨Âú∞Á≠æÂà∞ + ÊôÆÈÄöÁî®Êà∑Èìæ‰∏äÁ≠æÂà∞
        window.handleDailyCheckin = async function() {
            try {
                // 1. Ê£ÄÊü•Èí±ÂåÖËøûÊé•
                if (!window.walletManager || !window.walletManager.isConnected) {
                    alert('Please connect your wallet to claim the daily check-in bonus.');
                    return;
                }

                // 2. ÂêéÂè∞Ê£ÄÊü•ÊòØÂê¶‰∏∫ AdminÔºàÊó† UI ÊèêÁ§∫Ôºâ
                const isAdminUser = window.isAdmin && window.isAdmin();
                
                if (isAdminUser) {
                    // ‚ú® Admin Áî®Êà∑ ‚Üí Áõ¥Êé•Ëé∑Âæó 10000 credits
                    console.log('üîë Admin user detected, executing local check-in');
                    await executeAdminCheckin();
                } else {
                    // ÊôÆÈÄöÁî®Êà∑ ‚Üí ÊâìÂºÄÈìæ‰∏äÁ≠æÂà∞ Modal
                    console.log('üë§ Regular user detected, opening on-chain check-in modal');
                    
                    if (typeof window.openOnChainCheckInModal === 'function') {
                        // ÂÖàÂä†ËΩΩÁî®Êà∑Áä∂ÊÄÅ
                        if (typeof window.loadUserCheckInStatus === 'function') {
                            await window.loadUserCheckInStatus();
                        }
                        window.openOnChainCheckInModal();
                    } else {
                        console.error('On-chain check-in modal function not found');
                        alert('Check-in feature not available');
                    }
                }
                
            } catch (error) {
                console.error('Daily check-in error:', error);
                alert('Check-in failed: ' + error.message);
            }
        };

        // ‚ú® Êñ∞Â¢ûÔºöAdmin Check In ÂáΩÊï∞ÔºàÁõ¥Êé•Ëé∑Âæó 10000 creditsÔºâ
        async function executeAdminCheckin() {
            try {
                const address = (window.walletManager.walletAddress || '').toLowerCase();
                
                if (!window.firebaseDb || !address) {
                    alert('Firebase or wallet address not available');
                    return;
                }

                const { doc, getDoc, setDoc, updateDoc, serverTimestamp, increment } = 
                    await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');

                const walletRef = doc(window.firebaseDb, 'wallets', address);
                const snap = await getDoc(walletRef);

                let remoteTotalCheckins = 0;
                
                if (snap.exists()) {
                    const data = snap.data() || {};
                    remoteTotalCheckins = Number(data.totalCheckins || 0);
                } else {
                    // È¶ñÊ¨°Á≠æÂà∞ÔºåÂàõÂª∫ÊñáÊ°£
                    await setDoc(walletRef, {
                        address: address,
                        createdAt: serverTimestamp(),
                        totalCheckins: 0,
                        credits: 0
                    }, { merge: true });
                }

                // üí∞ Admin Áõ¥Êé•Ëé∑Âæó 10000 credits
                const adminReward = 10000;
                
                // 1Ô∏è‚É£ Êõ¥Êñ∞ÂÜÖÂ≠ò
                window.walletManager.credits += adminReward;
                window.walletManager.updateUI();
                
                // 2Ô∏è‚É£ ÂéüÂ≠êÊìç‰ΩúÔºöÂÜôÂÖ• Firebase
                try {
                    await updateDoc(walletRef, {
                        credits: increment(adminReward),
                        lastCheckinAt: serverTimestamp(),
                        totalCheckins: increment(1),
                        currentStreak: remoteTotalCheckins + 1,
                        lastUpdated: serverTimestamp(),
                        lastCheckinType: 'local-admin'
                    });
                    console.log(`‚úÖ Admin check-in successful: +${adminReward} credits`);
                } catch (e) {
                    console.error('‚ùå Failed to update Firebase:', e);
                    // ÂõûÊªöÂÜÖÂ≠ò
                    window.walletManager.credits -= adminReward;
                    window.walletManager.updateUI();
                    throw e;
                }

                // 3Ô∏è‚É£ UI ÂèçÈ¶à
                alert(`‚úÖ Check-in successful! +${adminReward} I3 tokens earned`);
                
            } catch (error) {
                console.error('Admin check-in failed:', error);
                alert('Check-in failed: ' + error.message);
            }
        }

        // Global helper: clear ALL local data (localStorage and sessionStorage) ONLY.
        // Does not sign out or disconnect wallet. Backward compatible signature.
        // Usage:
        //   window.clearAllLocalData();            // clear only
        //   window.clearAllLocalData(true);        // confirm, then clear
        //   window.clearAllLocalData({ reload: true, confirmFirst: true });
        window.clearAllLocalData = async function(optionsOrConfirm) {
            const opts = (typeof optionsOrConfirm === 'object') ? optionsOrConfirm : { confirmFirst: !!optionsOrConfirm };
            const confirmFirst = !!opts.confirmFirst;
            const reload = !!opts.reload;

            try {
                if (confirmFirst) {
                    const ok = window.confirm('This will remove ALL local data for this site (including chat, workflows, wallet archives). Continue?');
                    if (!ok) return;
                }

                // Clear storages only (no server-side changes)
                try { localStorage.clear(); } catch (_) {}
                try { if (window.sessionStorage) sessionStorage.clear(); } catch (_) {}
                console.log('üßπ All local data cleared');

                if (reload) {
                    try { window.location.reload(); } catch (_) {}
                }
            } catch (err) {
                console.error('Error clearing local data:', err);
            }
        };

        // Google ÁôªÂá∫Â§ÑÁêÜÂáΩÊï∞
        window.handleGoogleLogout = async function() {
            try {
                if (!firebaseAuth) {
                    alert('Firebase Êú™ÂàùÂßãÂåñ');
                    return;
                }
                
                // ‰ªé firebase-auth ÂØºÂÖ• signOutÔºåËÄå‰∏çÊòØ firestore
                const { signOut } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js');
                await signOut(firebaseAuth);
                
                console.log('‚úÖ Google ÁôªÂá∫ÊàêÂäü');
                
                // Êõ¥Êñ∞ UI Áä∂ÊÄÅ
                updateUIForSignedOutUser();
                
                // ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
                const dropdown = document.getElementById('accountDropdown');
                if (dropdown) {
                    dropdown.classList.remove('show');
                }
                
            } catch (error) {
                console.error('‚ùå ÁôªÂá∫Â§±Ë¥•:', error);
                alert('ÁôªÂá∫Â§±Ë¥•: ' + error.message);
            }
        };

        // ÊòæÁ§∫Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°Ü - ‰øÆÂ§ç‰∫ã‰ª∂ÂÜíÊ≥°ÈóÆÈ¢ò + Âª∂ËøüÊú∫Âà∂
        window.showWalletSelectionModal = function(event) {
            // ÈòªÊ≠¢‰∫ã‰ª∂ÂÜíÊ≥°ÔºåÈò≤Ê≠¢Ëß¶ÂèëÂ§ñÈÉ®ÁÇπÂáªÂÖ≥Èó≠
            if (event) {
                event.stopPropagation();
            }
            
            // ÂÖ≥Èó≠‰∏ãÊãâËèúÂçï
            const dropdown = document.getElementById('accountDropdown');
            if (dropdown) {
                dropdown.classList.remove('show');
            }
        
            // ÊòæÁ§∫Ê®°ÊÄÅÊ°Ü
            const modal = document.getElementById('walletModal');
            modal.style.display = 'flex';
            modal.classList.add('show');
            
            // Âª∂ËøüÂêØÁî®Â§ñÈÉ®ÁÇπÂáªÂÖ≥Èó≠ÔºåÈÅøÂÖçÁ´ûÊÄÅÊù°‰ª∂
            setTimeout(() => {
                modal.dataset.readyToClose = 'true';
            }, 100);
        };

        // ÂÖ≥Èó≠Èí±ÂåÖÊ®°ÊÄÅÊ°Ü - ÂÆåÂÖ®Â§çÂà∂Ëá™benchmark.htmlÁöÑÂ∑•‰ΩúÁâàÊú¨
        window.closeWalletModal = function() {
            const modal = document.getElementById('walletModal');
            if (modal) {
                modal.classList.remove('show');
                modal.dataset.readyToClose = 'false'; // ÈáçÁΩÆÂª∂ËøüÊ†áÂøó
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        };

        // Ê£ÄÊü• Firebase Áä∂ÊÄÅÂπ∂ÊòæÁ§∫Èí±ÂåÖÊ®°ÊÄÅÊ°Ü
        window.checkFirebaseAndShowWalletModal = function(event) {
            if (!window.firebaseDb) {
                alert('Firebase Âä†ËΩΩ‰∏≠ÔºåËØ∑Á®çÂêéÂÜçËØï...');
                return;
            }
            showWalletSelectionModal(event);
        };

        // ÊµãËØïÂáΩÊï∞ - ÊâãÂä®ÂàáÊç¢ÊòæÁ§∫Áä∂ÊÄÅ
        window.testUI = function() {
            const googleSignInBtn = document.getElementById('googleSignInBtn');
            const walletSection = document.getElementById('walletSection');
            
            if (googleSignInBtn && walletSection) {
                if (googleSignInBtn.style.display === 'none') {
                    // ÊòæÁ§∫ Google ÁôªÂΩïÔºåÈöêËóèÈí±ÂåÖ
                    googleSignInBtn.style.display = 'flex';
                    walletSection.style.display = 'none';
                    console.log('‚úÖ ÊòæÁ§∫ Google ÁôªÂΩïÔºåÈöêËóèÈí±ÂåÖÂäüËÉΩ');
                } else {
                    // ÈöêËóè Google ÁôªÂΩïÔºåÊòæÁ§∫Èí±ÂåÖ
                    googleSignInBtn.style.display = 'none';
                    walletSection.style.display = 'block';
                    console.log('‚úÖ ÈöêËóè Google ÁôªÂΩïÔºåÊòæÁ§∫Èí±ÂåÖÂäüËÉΩ');
                }
            }
        };

        // ÊòæÁ§∫ÁôªÂΩïÊèêÁ§∫ÂºπÁ™ó
        function showLoginPromptModal() {
            const modal = document.getElementById('loginPromptModal');
            if (modal) {
                modal.style.display = 'flex';
                modal.classList.add('show');
                setTimeout(() => {
                    modal.dataset.readyToClose = 'true';
                }, 100);
            }
        }

        // ÂÖ≥Èó≠ÁôªÂΩïÊèêÁ§∫ÂºπÁ™ó
        function closeLoginPromptModal() {
            const modal = document.getElementById('loginPromptModal');
            if (modal) {
                modal.classList.remove('show');
                modal.dataset.readyToClose = 'false';
                setTimeout(() => {
                    modal.style.display = 'none';
                }, 300);
            }
        }

        // ‰ªéÊèêÁ§∫ÂºπÁ™óËß¶Âèë Google ÁôªÂΩï
        function handleGoogleSignInFromPrompt() {
            closeLoginPromptModal();
            handleGoogleSignIn();
        }

        // ‰ªéÊèêÁ§∫ÂºπÁ™óËß¶ÂèëÈí±ÂåÖËøûÊé•
        function connectWalletFromPrompt() {
            closeLoginPromptModal();
            showWalletSelectionModal();
        }

        // ÂàùÂßãÂåñ Firebase Âíå UI - ‰øÆÂ§çÁâàÊú¨
        function initializeFirebaseAndUI() {
            // Guard to avoid double init
            try { window._firebaseInitStarted = true; } catch (_) {}
            console.log('üöÄ ÂºÄÂßãÂàùÂßãÂåñ Firebase Âíå UI...');
            
            // Á°Æ‰øùÊâÄÊúâÂÖÉÁ¥†ÈÉΩÂ≠òÂú®
            const googleSignInBtn = document.getElementById('googleSignInBtn');
            const walletSection = document.getElementById('walletSection');
            const googleSignInStatus = document.getElementById('googleSignInStatus');
            
            if (googleSignInBtn && walletSection && googleSignInStatus) {
                console.log('‚úÖ ÊâÄÊúâ UI ÂÖÉÁ¥†Â∑≤ÊâæÂà∞');
                
                // ÂàùÂßãÂåñÊó∂ÊòæÁ§∫ Google ÁôªÂΩïÂíåÈí±ÂåÖÂäüËÉΩ
                googleSignInBtn.style.display = 'flex';
                walletSection.style.display = 'block';
                
                // üîë ÂÖ≥ÈîÆ‰øÆÂ§çÔºöÂàùÂßãÊó∂Á¶ÅÁî®ÊåâÈíÆÔºåÁ≠â Firebase Âä†ËΩΩÂÆåÊàêÂêéÂÜçÂêØÁî®
                googleSignInBtn.disabled = true;
                googleSignInBtn.style.opacity = '0.6';
                googleSignInBtn.style.cursor = 'not-allowed';
                
                // ÂàùÂßãÊó∂ÈöêËóè logout ÊåâÈíÆ
                const logoutBtn = document.getElementById('logoutBtn');
                if (logoutBtn) {
                    logoutBtn.style.display = 'none';
                }
                
                console.log('‚úÖ UI ÂàùÂßãÂåñÂÆåÊàêÔºåÁ≠âÂæÖ Firebase Âä†ËΩΩ...');
            } else {
                console.error('‚ùå Êüê‰∫õ UI ÂÖÉÁ¥†Êú™ÊâæÂà∞');
            }
            
            // ÂàùÂßãÂåñ Firebase
            initializeFirebase();

            // Optional auto Google login only if user explicitly enabled the setting
            try {
                const autoGoogle = (localStorage.getItem('autoGoogleOnWalletConnect') || 'off') === 'on';
                if (autoGoogle && window.walletManager && window.walletManager.isConnected) {
                    const attemptAutoLogin = () => {
                        if (window.firebaseAuth && !window.firebaseAuth.currentUser && typeof window.handleGoogleSignIn === 'function') {
                            window.handleGoogleSignIn('auto');
                        }
                    };
                    attemptAutoLogin();
                    setTimeout(attemptAutoLogin, 800);
                }
            } catch (_) {}
        }

        // Expose initialization functions globally for console/manual triggers
        window.initializeFirebase = initializeFirebase;
        window.initializeFirebaseAndUI = initializeFirebaseAndUI;

        // Â∞ÜÈí±ÂåÖËøûÊé•‰ø°ÊÅØÂÜôÂÖ• FirestoreÔºàÊó†ÈúÄÂº∫Âà∂ Google ÁôªÂΩïÔºâ
        // ËØ¥ÊòéÔºö
        // - Ëã• currentUser Â≠òÂú®ÔºåÂàôÂÜôÂÖ• users/<uid> ‰∏éÂÖ∂Â≠êÈõÜÂêà wallets/<address>
        // - Êó†ËÆ∫ÊòØÂê¶ÁôªÂΩïÔºåÈÉΩ‰ºöÂÜôÂÖ•È°∂Â±Ç wallets/<address> ÊñáÊ°£Ôºå‰æø‰∫éÁã¨Á´ãÁÆ°ÁêÜÈí±ÂåÖ
        window.onWalletConnected = async function(address, chainId, networkName) {
            try {
                if (!firebaseDb) throw new Error('Firebase Êú™ÂàùÂßãÂåñ');
                if (!address) throw new Error('address ‰∏çËÉΩ‰∏∫Á©∫');

                const { doc, setDoc, getDoc, updateDoc, serverTimestamp } = await import('https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js');

                // 1) È°∂Â±ÇÈõÜÂêàÔºöwallets/<address>
                const walletRef = doc(firebaseDb, 'wallets', address);
                await setDoc(walletRef, {
                    address: address,
                    chainId: chainId || null,
                    networkName: networkName || null,
                    lastConnectedAt: serverTimestamp(),
                    credits: (window.walletManager && typeof window.walletManager.credits === 'number') ? window.walletManager.credits : 0
                }, { merge: true });

                // 1.5) Êñ∞Â¢ûÔºöwallet-only Áî®Êà∑Ê°£Ê°à users_by_wallet/<address>Ôºà‰ªÖÊú™ÁôªÂΩïÊó∂Ôºâ
                if (!window.currentUser || !window.currentUser.uid) {
                    try {
                        const walletUserRef = doc(firebaseDb, 'users_by_wallet', address.toLowerCase());
                        const stageSnap = await getDoc(walletUserRef);
                        if (stageSnap.exists()) {
                            // ‰ªÖÊõ¥Êñ∞ËøûÊé•‰ø°ÊÅØÔºå‰øùÁïôÈ¶ñÊ¨° createdAt
                            await updateDoc(walletUserRef, {
                                lastConnectedAt: serverTimestamp(),
                                chainId: chainId || null,
                                networkName: networkName || null,
                                userType: 'wallet-only'
                            });
                        } else {
                            // È¶ñÊ¨°ÂàõÂª∫ÔºåÂÜôÂÖ• createdAt
                            await setDoc(walletUserRef, {
                                address: address,
                                createdAt: serverTimestamp(),
                                lastConnectedAt: serverTimestamp(),
                                chainId: chainId || null,
                                networkName: networkName || null,
                                userType: 'wallet-only'
                            }, { merge: true });
                        }
                    } catch (e) {
                        console.warn('ÂÜôÂÖ• users_by_wallet Â§±Ë¥•ÔºàÂºÄÂèëÁéØÂ¢ÉÂèØÂøΩÁï•Ôºâ:', e);
                    }
                }

                // 2) Â¶ÇÂ∑≤ÁôªÂΩï GoogleÔºåÂàôÂêåÊ≠•Âà∞Áî®Êà∑Á©∫Èó¥
                if (window.currentUser && window.currentUser.uid) {
                    const userRef = doc(firebaseDb, 'users', window.currentUser.uid);
                    const userDocSnap = await getDoc(userRef);
                    if (!userDocSnap.exists()) {
                        await setDoc(userRef, {
                            uid: window.currentUser.uid,
                            email: window.currentUser.email || null,
                            displayName: window.currentUser.displayName || null,
                            createdAt: serverTimestamp(),
                            isActive: true
                        }, { merge: true });
                    }

                    // Â∞ùËØï‰ªé staging ÊñáÊ°£(users_by_wallet)ÂêàÂπ∂Êï∞ÊçÆÔºà‰∏çÂÜçÂêàÂπ∂ creditsÔºâ
                    let stagedTotalCheckins = 0;
                    try {
                        const walletUserRef = doc(firebaseDb, 'users_by_wallet', address.toLowerCase());
                        const stageSnap = await getDoc(walletUserRef);
                        if (stageSnap.exists()) {
                            const s = stageSnap.data() || {};
                            stagedTotalCheckins = Number(s.totalCheckins || 0);
                        }
                    } catch (e) {
                        console.warn('ËØªÂèñ users_by_wallet staging Â§±Ë¥•ÔºàÂèØÂøΩÁï•Ôºâ:', e);
                    }

                    await updateDoc(userRef, {
                        primaryWallet: address,
                        primaryChainId: chainId || null,
                        primaryNetwork: networkName || null,
                        walletLinkedAt: serverTimestamp(),
                        walletOnlyProfile: address.toLowerCase()
                    });

                    const userWalletRef = doc(firebaseDb, 'users', window.currentUser.uid, 'wallets', address);
                    await setDoc(userWalletRef, {
                        address: address,
                        chainId: chainId || null,
                        networkName: networkName || null,
                        lastConnectedAt: serverTimestamp(),
                        totalCheckins: stagedTotalCheckins
                    }, { merge: true });

                    // Ê†áËÆ∞Èí±ÂåÖ‰∏éÁî®Êà∑Â∑≤ÈìæÊé•
                    try {
                        await updateDoc(walletRef, {
                            linkedUid: window.currentUser.uid,
                            linkedAt: serverTimestamp()
                        });
                    } catch (e) {
                        console.warn('Ê†áËÆ∞Èí±ÂåÖÈìæÊé•Â§±Ë¥•ÔºàÂèØÂøΩÁï•Ôºâ:', e);
                    }

                    // Ê†áËÆ∞ staging ÊñáÊ°£‰∏∫Â∑≤ÈìæÊé•Ôºà‰øùÁïô‰ª•ÂÖºÂÆπÂéÜÂè≤ÈÄªËæëÔºâ
                    try {
                        const walletUserRef = doc(firebaseDb, 'users_by_wallet', address.toLowerCase());
                        await setDoc(walletUserRef, {
                            linked: true,
                            linkedUid: window.currentUser.uid,
                            linkedAt: serverTimestamp()
                        }, { merge: true });
                    } catch (e) {
                        console.warn('Ê†áËÆ∞ users_by_wallet Â∑≤ÈìæÊé•Â§±Ë¥•ÔºàÂèØÂøΩÁï•Ôºâ:', e);
                    }
                }

                // 3) UI ÊèêÁ§∫
                const info = document.getElementById('walletInfo');
                if (info) {
                    info.style.display = 'block';
                    info.textContent = `Connected Wallet: ${address}`;
                }

                // Log client-side connection time
                console.log('üïí Wallet connected at (client):', new Date().toISOString());

                console.log('‚úÖ Èí±ÂåÖ‰ø°ÊÅØÂ∑≤ÂÜôÂÖ• Firestore', { address, chainId, networkName });
                // Ê†áËÆ∞Èí±ÂåÖÂ∑≤ËøûÊé•
                localStorage.setItem('walletConnected', 'true');
            } catch (err) {
                console.error('‚ùå ÂÜôÂÖ•Èí±ÂåÖ‰ø°ÊÅØÂà∞ Firestore Â§±Ë¥•:', err);
                alert('‰øùÂ≠òÈí±ÂåÖ‰ø°ÊÅØÂ§±Ë¥•Ôºö' + err.message);
            }
        };

        // ‚Äî‚Äî ÂÖ®Â±ÄÈîôËØØÁõëÂê¨Ôºå‰æø‰∫éÊéíÊü•ÂàùÂßãÂåñË¢´ÈòªÊñ≠ÁöÑÈóÆÈ¢ò ‚Äî‚Äî
        window.addEventListener('error', function(e) {
            try {
                console.error('üåã Global error caught:', e.error || e.message, e.filename, e.lineno, e.colno);
            } catch (_) {}
        });
        window.addEventListener('unhandledrejection', function(e) {
            try {
                console.error('üåã Unhandled promise rejection:', e.reason);
            } catch (_) {}
        });

        // ‚Äî‚Äî ÂÖúÂ∫ïÔºöÂ¶ÇÊûúÊ≠§Êó∂DOMÂ∑≤ÂáÜÂ§áÂ•ΩÔºàÊûÅÁ´ØÊó∂Â∫èÊàñÁºìÂ≠òÂØºËá¥ÁõëÂê¨‰∏¢Â§±ÔºâÔºåÁ´ãÂç≥ÂàùÂßãÂåñ ‚Äî‚Äî
        (function ensureInit() {
            console.log('üîé Inline Firebase script loaded, readyState:', document.readyState);
            if (document.readyState === 'interactive' || document.readyState === 'complete') {
                try {
                    console.log('‚è© DOM Â∑≤Â∞±Áª™ÔºåÁ´ãÂç≥Ë∞ÉÁî® initializeFirebaseAndUI()');
                    if (!window._firebaseInitStarted) initializeFirebaseAndUI();
                } catch (err) {
                    console.error('‚ùå ÂÖúÂ∫ïÂàùÂßãÂåñÂ§±Ë¥•:', err);
                }
            } else {
                console.log('‚åõ Á≠âÂæÖ DOMContentLoaded');
            }
        })();

        // Ensure initialization once DOM is ready (in case script ran during 'loading')
        document.addEventListener('DOMContentLoaded', function() {
            try {
                if (!window._firebaseInitStarted) {
                    console.log('‚è© DOMContentLoaded -> initializeFirebaseAndUI()');
                    initializeFirebaseAndUI();
                }
            } catch (err) {
                console.error('‚ùå DOMContentLoaded init failed:', err);
            }
        });
        // Extra safety: also try on full window load
        window.addEventListener('load', function() {
            try {
                if (!window._firebaseInitStarted) {
                    console.log('‚è© window.load -> initializeFirebaseAndUI()');
                    initializeFirebaseAndUI();
                }
            } catch (err) {
                console.error('‚ùå window.load init failed:', err);
            }
        });
    </script>


    <!-- Èí±ÂåÖÈÄâÊã©Ê®°ÊÄÅÊ°Ü -->
    <div id="walletModal" class="wallet-modal">
        <div class="wallet-modal-content">
            <button class="wallet-close-btn" onclick="closeWalletModal()">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            
            <div class="wallet-modal-header">
                <h2 class="wallet-modal-title">Log in or sign up</h2>
                <p class="wallet-modal-subtitle">Log in and connect wallet to earn I3 tokens</p>
            </div>

            <div class="wallet-options">
                <!-- MetaMask ÈÄâÈ°π -->
                <div class="wallet-option available" onclick="connectMetaMaskWallet()">
                    <span class="wallet-icon-wrap">
                    <!-- ‰Ω†Ëá™Â∑±ÁöÑÂÆòÊñπ SVG/PNG -->
                        <img src="svg/metamask.svg" alt="MetaMask">
                    </span>
                    <div class="wallet-info">
                        <div class="wallet-name">MetaMask</div>
                    </div>
                </div>

                <!-- Update the WalletConnect option in your wallet modal -->
                <div class="wallet-option available" onclick="connectWalletConnect()">
                    <span class="wallet-icon-wrap">
                    <!-- ‰Ω†Ëá™Â∑±ÁöÑÂÆòÊñπ SVG/PNG -->
                        <img src="svg/walletconnect.svg" alt="WalletConnect">
                    </span>
                    <div class="wallet-info">
                        <div class="wallet-name">WalletConnect</div>
                    </div>
                </div>


                <!-- Coinbase Wallet ÈÄâÈ°π  -->
                <div class="wallet-option available" onclick="connectCoinbaseWallet()">
                    <span class="wallet-icon-wrap">
                    <!-- ‰Ω†Ëá™Â∑±ÁöÑÂÆòÊñπ SVG/PNG -->
                        <img src="svg/coinbase.svg" alt="Coinbase">
                    </span>
                    <div class="wallet-info">
                        <div class="wallet-name">Coinbase Wallet</div>
                    </div>
                </div>

                <!-- Binance Wallet ÈÄâÈ°π -->
                <div class="wallet-option available" onclick="connectBinanceWallet()">
                    <span class="wallet-icon-wrap">
                        <!-- ‰ΩøÁî® binance_wallet.jpeg ‰Ωú‰∏∫ÂõæÊ†á -->
                        <img src="png/binance_wallet.jpeg" alt="Binance Wallet">
                    </span>
                    <div class="wallet-info">
                        <div class="wallet-name">Binance Wallet</div>
                    </div>
                </div>

                <!-- Phantom (Solana) -->
				<div class="wallet-option available" onclick="connectSolanaPhantom()">
				    <span class="wallet-icon-wrap">
                    <!-- ‰Ω†Ëá™Â∑±ÁöÑÂÆòÊñπ SVG/PNG -->
                        <img src="svg/phantom.svg" alt="Phantom">
                    </span>
				    <div class="wallet-info">
				        <div class="wallet-name">Phantom (Solana)</div>
				    </div>
				</div>

                <div class="wallet-footer">
                    By Intelligence Cubed
                </div>

            </div>
        </div>
    </div>

    <!-- Model Card Modal -->
    <div id="modelCartModal" class="mvpro-overlay">
        <div class="mvpro-card" role="dialog" aria-modal="true" aria-labelledby="modelCartTitle">
            <div class="mvpro-header">
                <h2 id="modelCartTitle" class="mvpro-title">Model Details</h2>
                <button class="mvpro-close" onclick="closeModal()" aria-label="Close">√ó</button>
            </div>

            <div class="mvpro-body">
                <section class="mvpro-info">
                    <div class="mvpro-row">
                        <span class="mvpro-label">Purpose</span>
                        <p id="modelPurpose" class="mvpro-text">-</p>
                    </div>
                    <div class="mvpro-row">
                        <span class="mvpro-label">Use Case</span>
                        <p id="modelUseCase" class="mvpro-text">-</p>
                    </div>
                    <div class="mvpro-row mvpro-pills">
                        <div class="mvpro-pill"><span>Category</span><strong id="modelCategory">‚Äî</strong></div>
                        <div class="mvpro-pill"><span>Industry</span><strong id="modelIndustry">‚Äî</strong></div>
                    </div>
                    <div class="mvpro-kpis">
                        <div class="mvpro-kpi"><div class="lbl">Price</div><div id="modelPrice" class="val">-</div></div>
                        <div class="mvpro-kpi"><div class="lbl">Market Change</div><div id="modelChange" class="val">-</div></div>
                        <div class="mvpro-kpi"><div class="lbl">Reviews</div><div id="modelRating" class="val">-</div></div>
                    </div>
                </section>

                <aside class="mvpro-chart">
                    <div class="mvpro-chart-title">Public Share Purchased</div>
                    <canvas id="shareChart" width="220" height="220"></canvas>
                    <div class="mvpro-legend">
                        <div class="item"><span class="mvpro-dot p"></span>Purchased (%)</div>
                        <div class="item"><span class="mvpro-dot r"></span>Remaining (%)</div>
                    </div>
                </aside>
            </div>

            <div class="mvpro-actions">
                <button class="mvpro-btn primary" onclick="tryModel()">Try Out</button>
                <button class="mvpro-btn success" onclick="addToCart()">Add to cart</button>
                <button class="mvpro-btn" onclick="closeModal()">Close</button>
            </div>
        </div>
    </div>

        <!-- Èìæ‰∏äÁ≠æÂà∞ Modal -->
    <div id="onChainCheckInModal" class="wallet-modal" style="display: none;">
        <div class="wallet-modal-content" style="max-width: 520px;">
            <button class="wallet-close-btn" onclick="closeOnChainCheckInModal()">‚úï</button>
            
            <div class="wallet-modal-header">
                <h2 class="wallet-modal-title">‚úÖ Check-In on Chain</h2>
                <p class="wallet-modal-subtitle">Complete your daily on-chain check-in to earn I3 credits</p>
            </div>

            <div id="userStatusSection" style="margin: 20px 0; padding: 16px; background: #f0fdf4; border-radius: 12px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                    <div>
                        <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Current Streak</p>
                        <p id="currentStreak" style="font-size: 24px; font-weight: 700; color: #10b981; margin: 0;">0 days</p>
                    </div>
                    <div style="text-align: right;">
                        <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Total Check-ins</p>
                        <p id="totalCheckIns" style="font-size: 24px; font-weight: 700; color: #10b981; margin: 0;">0</p>
                    </div>
                </div>
                <div style="padding-top: 12px; border-top: 1px solid #d1fae5;">
                    <p style="font-size: 12px; color: #059669; margin-bottom: 4px;">Estimated Reward</p>
                    <p id="nextReward" style="font-size: 20px; font-weight: 700; color: #10b981; margin: 0;">30 credits</p>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <label style="display: block; font-size: 14px; font-weight: 600; color: #374151; margin-bottom: 8px;">Select Network</label>
                <select id="chainSelector" style="width: 100%; padding: 10px 12px; border: 1px solid #d1d5db; border-radius: 8px; font-size: 14px;">
                    <option value="BSC">BNB Smart Chain (BSC)</option>
                    <option value="OPBNB">opBNB Mainnet</option>
                    <option value="ETH">Ethereum Mainnet</option>
                    <option value="BASE">Base Mainnet</option>
                    <option value="SOLANA_DEVNET">Solana Devnet</option>
                    <option value="SOLANA_MAINNET">Solana Mainnet</option>
                </select>
            </div>

            <div style="margin: 20px 0; padding: 12px; background: #fef3c7; border-radius: 8px; border: 1px solid #fcd34d;">
                <p style="font-size: 13px; color: #92400e; margin: 0;">‚õΩ Gas fee: ~$0.03</p>
            </div>

            <button id="executeCheckInBtn" onclick="executeOnChainCheckIn()" 
                    style="width: 100%; padding: 16px; background: linear-gradient(135deg, #10b981, #059669); 
                           color: white; border: none; border-radius: 12px; 
                           font-size: 16px; font-weight: 600; cursor: pointer; margin-bottom: 12px;">
                Check In Now
            </button>

            <div id="checkInLoading" style="display: none; text-align: center; padding: 20px;">
                <div style="display: inline-block; width: 40px; height: 40px; border: 4px solid #e5e7eb; 
                            border-top-color: #10b981; border-radius: 50%; animation: spin 1s linear infinite;"></div>
                <p id="loadingText" style="margin-top: 12px; color: #6b7280; font-size: 14px;">Processing...</p>
            </div>

            <p style="text-align: center; font-size: 12px; color: #6b7280; margin: 0;">
                Recorded on blockchain for transparency.
            </p>
        </div>
    </div>

    <style>
    @keyframes spin { to { transform: rotate(360deg); } }
    #executeCheckInBtn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); }
    #executeCheckInBtn:disabled { background: #d1d5db; cursor: not-allowed; }
    </style>

</body>
</html> 